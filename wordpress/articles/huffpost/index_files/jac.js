var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},writable:!0,configurable:!0})},function(e,t,n){"use strict";n.r(t);n(0);var i={setStyles:function(e,t){Object.keys(t).forEach((function(n){void 0!==t[n]&&(e.style[n]=t[n])}))},getComputedStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=n.getComputedStyle(e);return t?i.getPropertyValue(t):i}},o=!1;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document;return"CSS1Compat"===t.compatMode&&t.documentElement?t.documentElement:t.body}var a={getPageOffsets:function(){var e=window.document;return{x:window.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft,y:window.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop}},getViewportDimension:function(){var e=window.document,t=e.documentElement.clientWidth,n="CSS1Compat"===e.compatMode&&t||e.body&&e.body.clientWidth||t,i=e.documentElement.clientHeight;return{w:n,h:"CSS1Compat"===e.compatMode&&i||e.body&&e.body.clientHeight||i}},addDOMLoadListener:function(e){if("loading"!==document.readyState)return e();function t(){if(!o)return o=!0,e()}if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t);var n=!1;try{n=null===window.frameElement}catch(e){}if(document.documentElement.doScroll&&n)return function e(){if(!o){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}return t()}}()}},addPageLoadListener:function(e){if("complete"===document.readyState)return e();if(void 0!==window.addEventListener)window.addEventListener("load",e,!1);else if(void 0!==document.addEventListener)document.addEventListener("load",e,!1);else if(void 0!==window.attachEvent)window.attachEvent("onload",e);else if("function"==typeof window.onload){var t=window.onload;window.onload=function(){t(),e()}}else window.onload=e},getWindowLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return{y:e.screenY||e.screenTop||0,x:e.screenX||e.screenLeft||0}},getPageSize:function(){var e=window.document,t=e.documentElement.scrollWidth,n="CSS1Compat"===e.compatMode&&t||e.body&&e.body.scrollWidth||t,i=e.documentElement.scrollHeight;return{w:n,h:"CSS1Compat"===e.compatMode&&i||e.body&&e.body.scrollHeight||i}},getPageScollInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=r(e),n=0,i=0;return e.defaultView&&(n=Math.round(e.defaultView.pageXOffset),i=Math.round(e.defaultView.pageYOffset)),{x:Math.max(t.scrollLeft,n),y:Math.max(t.scrollTop,i),w:Math.max(t.scrollWidth,0),h:Math.max(t.scrollHeight,0)}},getDocumentElement:r,injectTrackingPixel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t.document,o=n.createElement("iframe");o.src=e,i.setStyles(o,{display:"none",border:"none",width:0,height:0}),n.body.appendChild(o)}};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.type=t,this.meta=n,this.target=null};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=p(e);if(t()){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}(n);function n(){return l(this,n),t.apply(this,arguments)}return n}(c);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=null,o=null,r=function(){e.apply(n,o),i=null};return function(){if(!i){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];o=n,i=setTimeout(r,t)}}}function y(e,t){if(Array.isArray(t)){if(t.indexOf(e)>=0)return!0}else for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===e)return!0;return!1}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}d(v,"SCROLL","page.scroll"),d(v,"RESIZE","page.resize"),d(v,"VISIBILITY","page.visibility"),d(v,"FOCUS","window.focus"),d(v,"BLUR","window.blur"),d(v,"DOM_LOADED","dom.loaded"),d(v,"LOADED","page.loaded"),d(v,"BEFORE_UNLOAD","page.stopped");var w="function",E="number",b="object",O="string",_="undefined";function T(e){return g(e)!==_}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=Number.NaN;return g(e)===E?o=e:g(e)===O&&(o=Number(e),isNaN(o)&&(o=parseFloat(e))),isNaN(o)||T(n)&&o<n||T(i)&&o>i?t:o}var P={isSet:T,isFunction:function(e){return g(e)===w},isString:function(e){return g(e)===O},isObject:function(e){return g(e)===b},num:S,int:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=S(e,t,n,i);return g(o)!==E||isNaN(o)?t:Math.round(o)}};function R(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log.apply(console,[].slice.call(t))}catch(e){}}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k="exists",C="remove",A={on:function(e,t,n){this.eventTypes||(this.eventTypes={}),this.eventTypes[e]||(this.eventTypes[e]=[]),y(t,this.eventTypes[e])||(n?this.eventTypes[e].push({ref:n,handler:t}):this.eventTypes[e].push(t))},off:function(e,t,n){this.eventTypes&&Array.isArray(this.eventTypes[e])&&this._validateOrRemove.call(this,e,t,n,C)},hasEventListener:function(e,t,n){return!(!this.eventTypes||!Array.isArray(this.eventTypes[e]))&&this._validateOrRemove.call(this,e,t,n,k)},trigger:function(e){if(this.eventTypes&&D(e)===b&&D(e.type)===O&&this.eventTypes[e.type]){e.target=e.target||this;for(var t=this.eventTypes[e.type].slice(0),n=0;n<t.length;n++){var i=t[n];if(D(i)===b)try{i.handler.call(i.ref,e)}catch(t){R("Error calling callback",i,e,t)}else i(e)}}},_validateOrRemove:function(e,t,n,i){for(var o=0;o<this.eventTypes[e].length;o++){var r=this.eventTypes[e][o],a=n?b:w;if(a===D(r))switch(a){case w:if(r===t)return i===C&&this.eventTypes[e].splice(o,1),!0;break;case b:if(r.handler===t&&r.ref===n)return i===C&&this.eventTypes[e].splice(o,1),!0}}return!1}};function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function L(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function F(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenStatusProp:e,visibilityChange:t}}var x=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throttleTime:200};I(this,e),G.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:!1}),W.set(this,{writable:!0,value:!1}),H.set(this,{writable:!0,value:!1}),V.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),M(this,"on",(function(e,t,n){Object.getPrototypeOf(this).on.call(this,e,t,n);var i,o=!1;if((e===v.DOM_LOADED&&j(this,U)||e===v.LOADED&&j(this,W)||e===v.VISIBILITY)&&(o=!0),o)if(i=e===v.VISIBILITY?new v(v.VISIBILITY,{hidden:!!window.document[j(this,G)]}):e===v.DOM_LOADED?new v(v.DOM_LOADED):new v(v.LOADED,{timestamp:j(this,z)}),n)try{t.call(n,i)}catch(e){R("Error calling callback",t,event)}else t(i)})),a.addDOMLoadListener((function(){L(t,U,!0),t.trigger(new v(v.DOM_LOADED))})),a.addPageLoadListener((function(){L(t,W,!0),L(t,z,(new Date).getTime()),t.trigger(new v(v.LOADED,{timestamp:j(t,z)}))}));var i=F(),o=i.hiddenStatusProp,r=i.visibilityChange;o&&(L(this,G,o),document.addEventListener(r,(function(){return t.dispatchVisibilityChange()})),L(this,H,!window.document[j(this,G)])),window.addEventListener("scroll",m((function(){return t.dispatchViewportEvent(v.SCROLL)}),n.throttleTime),!1),window.addEventListener("resize",m((function(){return t.dispatchViewportEvent(v.RESIZE)}),n.throttleTime),!1),window.addEventListener("focus",(function(){return t.dispatchFocusChange(!0)})),window.addEventListener("blur",(function(){return t.dispatchFocusChange(!1)})),L(this,V,document.hasFocus()),window.addEventListener("beforeunload",(function(){return t.trigger(new v(v.BEFORE_UNLOAD))}))}var t,n,i;return t=e,(n=[{key:"dispatchViewportEvent",value:function(e){var t=a.getPageOffsets(),n=a.getViewportDimension(),i=new v(e,{offsetX:t.x,offsetY:t.y,width:n.w,height:n.h});this.trigger(i)}},{key:"dispatchVisibilityChange",value:function(){L(this,H,!window.document[j(this,G)]),this.trigger(new v(v.VISIBILITY,{hidden:!!window.document[j(this,G)]}))}},{key:"dispatchFocusChange",value:function(e){e&&!j(this,V)?(L(this,V,!0),this.trigger(new v(v.FOCUS))):!e&&j(this,V)&&(L(this,V,!1),this.trigger(new v(v.BLUR)))}},{key:"_reset",value:function(){L(this,U,!1),L(this,W,!1)}},{key:"domLoaded",get:function(){return j(this,U)}},{key:"pageLoaded",get:function(){return j(this,W)}},{key:"isVisible",get:function(){return j(this,H)}},{key:"hasFocus",get:function(){return j(this,V)}}])&&N(t.prototype,n),i&&N(t,i),e}(),G=new WeakMap,U=new WeakMap,W=new WeakMap,H=new WeakMap,V=new WeakMap,z=new WeakMap;Object.assign(x.prototype,A);var J=x;var B,Z,Y,q=function e(t){var n=t.topic,i=t.meta,o=void 0===i?{}:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.topic=n,this.meta=o};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}B=q,Z="topic",Y={WRITE_COMPLETE:"".concat("jac.sandbox",".writeComplete"),PAGE_LOAD:"".concat("jac.sandbox",".pageLoad"),SIZE:"".concat("jac.sandbox",".size"),UNLOAD:"".concat("jac.sandbox",".unload")},Z in B?Object.defineProperty(B,Z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):B[Z]=Y;var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=$(e);if(t()){var o=$(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Q(this,n)}}(n);function n(e){var i,o=e.cmd,r=void 0===o?null:o,a=e.status,s=void 0===a?null:a,c=e.meta,u=void 0===c?{}:c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,{topic:n.topic.SAFE_FRAME,meta:u})).cmd=r,i.status=s,i}return n}(q);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ee(te,"topic",{SAFE_FRAME:"jac.sandbox.sf"}),ee(te,"cmd",{EXPAND_OVER:"exp-ovr",EXPAND_PUSH:"exp-push",RESIZE_TO:"resize-to",COLLAPSE:"collapse",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie",MSG:"msg",HIDE:"hide",SHOW:"show"}),ee(te,"status",{COLLAPSED:"collapsed",COLLAPSING:"collapsing",EXPANDED:"expanded",EXPANDING:"expanding",RESIZE_TO:"resize-to",GEOMETRY_UPDATE:"geom-update",FOCUS_CHANGE:"focus-change",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie",FAILED:"failed",CMP:"cmp",MSG:"msg",META_UPDATE:"meta-update",HIDE:"hide",SHOW:"show",REGISTER:"register"});var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=re(e);if(t()){var o=re(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return oe(this,n)}}(n);function n(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e.topic)).message=e,i}return n}(c);function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ce(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function ue(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var le=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fe.set(this,{writable:!0,value:void 0}),he.set(this,{writable:!0,value:void 0}),ue(this,fe,n),this.targetWindow=t}var t,n,i;return t=e,(n=[{key:"send",value:function(e){this.targetWindow.postMessage(Object.assign({token:ce(this,fe)},e),"*")}},{key:"listen",value:function(){var e=this;ce(this,he)||(ue(this,he,(function(t){return e._handlePostMessage(t)})),window.addEventListener("message",ce(this,he)))}},{key:"cleanup",value:function(){window.removeEventListener("message",ce(this,he)),ue(this,he,null)}},{key:"_handlePostMessage",value:function(e){if(this._shouldReadPostMessage(e)){var t=new(e.data.topic===te.topic.SAFE_FRAME?te:q)(e.data),n=new ae(t);this.trigger(n)}}},{key:"_shouldReadPostMessage",value:function(e){return e.source===this.targetWindow&&e.data&&e.data.token===ce(this,fe)&&e.data.topic}}])&&se(t.prototype,n),i&&se(t,i),e}(),fe=new WeakMap,he=new WeakMap;Object.assign(le.prototype,A);var pe=le;function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"isMobileMomentAd",value:function(e){return!!e&&!!e.meta&&"MobileMoments"===e.meta.GoldenFormat}},{key:"computeDisplaySize",value:function(e){var t={width:300,height:533},n=a.getViewportDimension();return e.config.client.features.mobileMoments.enabled&&n.w<550&&n.w<n.h&&(t.width=n.w,t.height=Math.floor(n.w*(16/9))),t}}],(n=null)&&de(t.prototype,n),i&&de(t,i),e}();function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function ge(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var we=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ee.set(this,{writable:!0,value:void 0}),be.set(this,{writable:!0,value:void 0}),ge(this,Ee,t),ge(this,be,n.service.sizes||[])}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=e.w,n=e.h;ye(this,be).indexOf("".concat(t,"x").concat(n))>=0&&ye(this,Ee).send(new q({topic:q.topic.SIZE,meta:{width:t,height:n}}))}},{key:"unload",value:function(){ye(this,Ee).send(new q({topic:q.topic.UNLOAD}))}}])&&me(t.prototype,n),i&&me(t,i),e}(),Ee=new WeakMap,be=new WeakMap,Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features||{};return{"exp-ovr":!(!t.expandOver||!t.expandOver.enabled),"exp-push":!(!t.expandPush||!t.expandPush.enabled),"read-cookie":!(!t.cookies||!t.cookies.read),"write-cookie":!(!t.cookies||!t.cookies.write),"resize-to":!(!t.resize||!t.resize.enabled)}};function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe={NOT_SUPPORTED:"Feature not supported by the host.",NOT_REGISTERED:"No prior $sf.ext.register() API call.",EXPANDED:"Already expanded.",NOT_EXPANDED:"Not expanded.",COMMAND_PENDING:"Command already in-progress.",INVALID_COOKIE_ARGS:"Invalid cookie arguments.",INVALID_ARGS:"Invalid arguments.",INVALID_SIZE:"Setting size to less than 1px is hiding, call $sf.ext.hide instead.",INVALID_HIDDEN_SIZE:"Setting size must be greater than 15 if SafeFrame has been hidden."},Re={COLLAPSED:"collapsed",COLLAPSING:"collapsing",EXPANDED:"expanded",EXPANDING:"expanding",RESIZING:"resizing",HIDDEN:"hidden"},De=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;_e(this,e),Se(this,"messenger",void 0),Se(this,"windowContext",void 0),Se(this,"sizesConfig",void 0),Se(this,"hasRegistered",!1),Se(this,"pendingCommand",null),Se(this,"alignmentElement",void 0),Se(this,"statusUpdateCallback",void 0),Se(this,"supportsMap",void 0),Se(this,"geomData",void 0),Se(this,"hasFocus",void 0),Se(this,"metaData",void 0),Se(this,"registrationKey",void 0),Se(this,"width",void 0),Se(this,"height",void 0),Se(this,"_status",Re.COLLAPSED),this.messenger=t,this.windowContext=o,this.sizesConfig=n.service.sizes||[];var r=n.client.features.safeFrame;this.supportsMap=Oe(r),t.on(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),(i=i||{}).geom&&(this.geomData=i.geom),i.focus&&(this.hasFocus=i.focus),this.metaData=i.meta||{}}var t,n,o;return t=e,(n=[{key:"_sendMessage",value:function(e){var t=e.cmd,n=e.meta;this.messenger.send(new te({cmd:t,meta:n})),this.pendingCommand=t}},{key:"_onSafeFrameMessage",value:function(e){var t=e.message,n=t.status,i=t.meta;if(y(n,te.status)){if(this.pendingCommand===i.cmd&&(this.pendingCommand=null,n===te.status.FAILED))switch(i.cmd){case te.cmd.EXPAND_OVER:case te.cmd.EXPAND_PUSH:case te.cmd.RESIZE_TO:this._status=Re.COLLAPSED;break;case te.cmd.COLLAPSE:this._status=Re.EXPANDED}this._callStatusUpdate(n,i)}}},{key:"register",value:function(e,t,n){if(this.hasRegistered)throw new Error("$sf.ext.register() can be called only once and has been called already.");this.hasRegistered=!0,P.isFunction(n)&&(this.statusUpdateCallback=n),this.sizesConfig.indexOf("".concat(e,"x").concat(t))>=0&&(this.messenger.send(new q({topic:q.topic.SIZE,meta:{width:e,height:t}})),this.width=e,this.height=t),this.registrationKey={},this._callStatusUpdate(te.status.REGISTER,{key:this.registrationKey})}},{key:"_width",value:function(){return P.isSet(this.width)||(this.width=a.getViewportDimension().w),this.width}},{key:"_height",value:function(){return P.isSet(this.height)||(this.height=a.getViewportDimension().h),this.height}},{key:"_callStatusUpdate",value:function(e,t){var n=t.cmd,i=t.reason,o=t.info,r=t.key;if(e===te.status.FAILED?console.warn("SafeFrame: command failed",{cmd:n,reason:i,info:o}):e===te.status.GEOMETRY_UPDATE?this.geomData=o:e===te.status.FOCUS_CHANGE?this.hasFocus=o:e===te.status.RESIZE_TO?(this.width=o.w,this.height=o.h,this._status=Re.COLLAPSED):y(e,Re)&&(this._status=e),this.statusUpdateCallback){var a={cmd:n,reason:i,info:o};r&&(a.key=r),this.statusUpdateCallback.call(this,e,a)}}},{key:"_sendFailureStatus",value:function(e,t){this._callStatusUpdate(te.status.FAILED,{cmd:e,reason:t})}},{key:"supports",value:function(e){return P.isSet(e)?!!this.supportsMap[e]:this.supportsMap}},{key:"expand",value:function(e){var t,n=e.t,i=e.l,o=e.r,r=e.b,a=e.push?te.cmd.EXPAND_PUSH:te.cmd.EXPAND_OVER;if(this.supports(a)?this.hasRegistered?this.pendingCommand?t=Pe.COMMAND_PENDING:this.status()===Re.EXPANDED&&(t=Pe.EXPANDED):t=Pe.NOT_REGISTERED:t=Pe.NOT_SUPPORTED,t)this._sendFailureStatus(a,t);else{var s={top:P.int(n,0,0),left:P.int(i,0,0),right:P.int(o,0,0),bottom:P.int(r,0,0)};this._align(s),this._sendMessage({cmd:a,meta:s}),this._status=Re.EXPANDING}}},{key:"collapse",value:function(){var e,t=te.cmd.COLLAPSE;this.hasRegistered?this.pendingCommand?e=Pe.COMMAND_PENDING:this.status()!==Re.EXPANDED&&(e=Pe.NOT_EXPANDED):e=Pe.NOT_REGISTERED,e?this._sendFailureStatus(t,e):(this._align(),this._sendMessage({cmd:t}),this._status=Re.COLLAPSING)}},{key:"_align",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=e.left,o=e.right,r=e.bottom;this.alignmentElement||(this.alignmentElement=this.windowContext.document.getElementById("fc_align"));var a={};this._addVerticalAlignment(a,t,r),this._addHorizontalAlignment(a,n,o),i.setStyles(this.alignmentElement,a)}},{key:"_addVerticalAlignment",value:function(e,t,n){t&&n?(e.top="".concat(t,"px"),e.bottom=null):t&&!n?(e.top=null,e.bottom="0"):!t&&n?(e.top="0",e.bottom=null):t||n||(this.alignmentElement.style.bottom?(e.top=null,e.bottom="0"):(e.top="0",e.bottom=null))}},{key:"_addHorizontalAlignment",value:function(e,t,n){t&&n?(e.left="".concat(t,"px"),e.right=null):t&&!n?(e.left=null,e.right="0"):!t&&n?(e.left="0",e.right=null):t||n||(this.alignmentElement.style.right?(e.left=null,e.right="0"):(e.left="0",e.right=null))}},{key:"cookie",value:function(e,t){var n,i=t?te.cmd.WRITE_COOKIE:te.cmd.READ_COOKIE;this.supports(i)?this.hasRegistered?!e||t&&!t.value?n=Pe.INVALID_COOKIE_ARGS:this.pendingCommand&&(n=Pe.COMMAND_PENDING):n=Pe.NOT_REGISTERED:n=Pe.NOT_SUPPORTED,n?this._sendFailureStatus(i,n):this._sendMessage({cmd:i,meta:{cookieName:e,cookieData:t}})}},{key:"meta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shared",n=Object.prototype.hasOwnProperty,i=this.metaData;if(n.call(i,t)){var o=i[t];if(n.call(o,e))return o[e]}return""}},{key:"status",value:function(){return this._status}},{key:"geom",value:function(){return this.geomData}},{key:"inViewPercentage",value:function(){if(this.geomData){var e=this.geomData.self.iv;return Math.round(100*e)}}},{key:"winHasFocus",value:function(){return this.hasFocus}},{key:"resizeTo",value:function(e){var t,n,i,o=te.cmd.RESIZE_TO;if(this.supports(te.cmd.RESIZE_TO)?P.isObject(e)?this.hasRegistered?this._status===Re.EXPANDED?i=Pe.EXPANDED:this.pendingCommand&&(i=Pe.COMMAND_PENDING):i=Pe.NOT_REGISTERED:i=Pe.INVALID_ARGS:i=Pe.NOT_SUPPORTED,!i)if(t=P.int(e.w,this._width()),n=P.int(e.h,this._height()),t<=1||n<=1)i=Pe.INVALID_SIZE;else if(this._status===Re.HIDDEN&&(t<=15||n<=15))i=Pe.INVALID_HIDDEN_SIZE;else if(t===this.width&&n===this.height)return;i?this._sendFailureStatus(o,i):(this._sendMessage({cmd:te.cmd.RESIZE_TO,meta:{width:t,height:n}}),this._status=Re.RESIZING)}},{key:"hide",value:function(e){this._status=Re.HIDDEN}},{key:"show",value:function(e){}}])&&Te(t.prototype,n),o&&Te(t,o),e}();function ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ce(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}Se(De,"FailureReason",Pe);var Ae=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ie.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Ie,new De(t,n,i,o))}var t,n,i;return t=e,(n=[{key:"register",value:function(e,t,n){Ce(this,Ie).register(e,t,n)}},{key:"supports",value:function(e){return Ce(this,Ie).supports(e)}},{key:"expand",value:function(e){Ce(this,Ie).expand(e)}},{key:"collapse",value:function(){Ce(this,Ie).collapse()}},{key:"cookie",value:function(e,t){Ce(this,Ie).cookie(e,t)}},{key:"meta",value:function(e,t){return Ce(this,Ie).meta(e,t)}},{key:"status",value:function(){return Ce(this,Ie).status()}},{key:"geom",value:function(){return Ce(this,Ie).geom()}},{key:"inViewPercentage",value:function(){return Ce(this,Ie).inViewPercentage()}},{key:"winHasFocus",value:function(){return Ce(this,Ie).winHasFocus()}},{key:"resizeTo",value:function(e){return Ce(this,Ie).resizeTo(e)}},{key:"hide",value:function(e){return Ce(this,Ie).hide(e)}},{key:"show",value:function(e){return Ce(this,Ie).show(e)}},{key:"msg",value:function(e,t){Ce(this,Ie).msg(e,t)}}])&&ke(t.prototype,n),i&&ke(t,i),e}(),Ie=new WeakMap;function Ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je,Le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Me(this,"messenger",void 0),Me(this,"lastMessageSentTime",void 0),this.messenger=t}var t,n,i;return t=e,(n=[{key:"_sendMessage",value:function(e){var t=e.cmd,n=e.meta;this.messenger.send(new te({cmd:t,meta:n}))}},{key:"msg",value:function(e){return!(this.lastMessageSentTime&&!(this.lastMessageSentTime<(new Date).getTime()-200)||(this._sendMessage({cmd:te.cmd.MSG,meta:e}),this.lastMessageSentTime=(new Date).getTime(),0))}}])&&Ne(t.prototype,n),i&&Ne(t,i),e}();function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xe(e){var t=e.detectSize,n=void 0!==t&&t,i=e.initialWidth,o=e.initialHeight,r=e.allowedSizes;je.send(new q({topic:q.topic.PAGE_LOAD})),n&&function e(t,n,i){var o=document.body.scrollWidth,r=document.body.scrollHeight;if(o>t||r>n){var a=function(e,t,n){var i=e*t,o=1e5,r={};return n.forEach((function(e){var t=Math.abs(i-e.width*e.height);t<o&&(o=t,r=e)})),r}(o,r,i),s=a.width,c=a.height;je.send(new q({topic:q.topic.SIZE,meta:{width:s,height:c}}))}else Ge>0&&(Ge-=100,setTimeout((function(){e(t,n,i)}),100))}(i,o,r)}var Ge=4e3;var Ue={"1AS":"1AS",VZMSSP:"VZMSSP"},We="px",He=1,Ve=2,ze="SF",Je="NFIF",Be="FIF",Ze={getParameter:function(e,t){t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getParameters:function(e,t){var n=this;return t.reduce((function(t,i){var o=n.getParameter(e,i);return o&&(t[i]=o),t}),{})},removeParameters:function(e){return e&&"string"==typeof e?e.split(/[?#]/)[0]:""}};function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ke={features:{mobileMoments:{enabled:!1},nonFriendlyIframe:{enabled:!1},safeFrame:{enabled:!1,features:{expandOver:{enabled:!0},resize:{enabled:!1},cookies:{read:!1,write:!1}}},rotation:{enabled:!1,cancellable:!0,period:2e4,limit:3,resizable:!1,requireViewable:!0},sandbox:{features:{fullscreen:{enabled:!0},autoplay:{enabled:!0},geolocation:{enabled:!1},camera:{enabled:!1},microphone:{enabled:!1}},allow:["forms","scripts","same-origin","popups","popups-to-escape-sandbox"]}},layout:{zIndex:10},content:{},fetch:{auto:!0,requireViewable:!1,minInterval:2e3},instrumentation:{viewability:{percent:50,pixels:0,duration:1e3}},meta:{shared:{}},render:{timeout:1e4,auto:!0,requireViewable:!1}},Qe={fetch:{minInterval:{minimum:500,isMetaInfo:!0}},features:{rotation:{period:{minimum:100,isMetaInfo:!0}}}},$e={params:{}},et={service:{host:"https://web.archive.org/web/20200805040542/https://jill.fc.yahoo.com/",adServer:{"1AS":{params:{},timeout:2e3},VZMSSP:{params:{},timeout:2e3}},positions:{},site:{name:"",queryParams:""},debug:!1,groups:{},user:{regs:{gdpr:{applies:null,euconsent:""},ccpa:{usPrivacy:""}},cookies:{}}},client:{positions:{},preventDuplicates:!1,trackers:{opus:!0,smartPixel:!1}}};function tt(e){return"object"===Xe(e)&&e.constructor===Array}function nt(e){Object.keys(e.client.positions).forEach((function(t){var n=e.client.positions[t];!function e(t,n){Object.keys(t).forEach((function(i){var o=Xe(n[i]);t[i].isMetaInfo&&"undefined"!==o&&!function(e,t,n){return!("number"===e&&"number"==typeof n.minimum&&t<n.minimum)}(o,n[i],t[i])?delete n[i]:t[i].isMetaInfo||"object"!==Xe(t[i])||"object"!==o||e(t[i],n[i])}))}(Qe,n)}))}var it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;Ye(this,e),t.document.referrer&&(et.service.site.referrer=t.document.referrer),et.service.site.pageSessionId=e.PAGE_SESSION_ID}var t,n,i;return t=e,i=[{key:"getRotationMinimumPeriod",value:function(){return Qe.features.rotation.period.minimum}}],(n=[{key:"cloneArray",value:function(e){var t=this;return e.map((function(e){var n;return"object"!==Xe(e)||tt(e)?n=tt(e)?t.cloneArray(e):e:(n={},t.copyObjectProperties(n,e)),n}))}},{key:"copyObjectProperties",value:function(e,t,n){var i=this;Object.keys(t).forEach((function(o){var r=t[o];"object"!==Xe(r)||tt(r)?(!n||n&&void 0===e[o])&&(e[o]=tt(r)?i.cloneArray(r):r):(e[o]=e[o]||{},i.copyObjectProperties(e[o],t[o],n))}))}},{key:"applyDefaults",value:function(e){var t,n,i=JSON.parse(JSON.stringify(et));return e.client&&e.client.positions&&(nt(e),function(e,t){Object.keys(t.client.positions).forEach((function(n){var i=t.client.positions[n];e.client.positions[n]=JSON.parse(JSON.stringify(Ke)),i.features&&i.features.safeFrame&&i.features.safeFrame.enabled||delete e.client.positions[n].features.safeFrame.features}))}(i,e)),e.service&&e.service.positions&&function(e,t){Object.keys(t.service.positions).forEach((function(t){e.service.positions[t]=JSON.parse(JSON.stringify($e))}))}(i,e),this.copyObjectProperties(i,e),t=i,(n=e).service&&n.service.adServer&&Object.keys(Ue).forEach((function(e){n.service.adServer[e]||delete t.service.adServer[e]})),i}}])&&qe(t.prototype,n),i&&qe(t,i),e}();function ot(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function at(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(it,"PAGE_SESSION_ID","xxxxxxxxx".replace(/[x]/g,(function(){return Math.floor(16*Math.random()).toString(16)})));var st=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ct.set(this,{writable:!0,value:void 0}),ut.set(this,{writable:!0,value:void 0}),lt.set(this,{writable:!0,value:void 0}),at(this,ut,t),at(this,ct,n),rt(this,ct).meta=rt(this,ct).meta||{}}var t,n,i;return t=e,i=[{key:"init",value:function(t){e.PAGE_ROTATION_INFO=e._getPageRotationParams(t)}},{key:"_getPageRotationParams",value:function(e){var t=Ze.getParameters(e.location.href,["RefreshTime","RefreshMax","RefreshKeepSize"]);return["RefreshTime","RefreshMax"].forEach((function(e){t[e]&&(t[e]=parseInt(t[e]))})),t}}],(n=[{key:"createNewPositionRotationConfig",value:function(e){if(Object.prototype.hasOwnProperty.call(e,Ue["1AS"])){var t=JSON.parse(JSON.stringify(rt(this,ut).config.client.features.rotation));if(t.enabled){!1===this._shouldRotateFromComments()&&(t.enabled=!1);var n=this._getEnvironmentRotationInfo();return n.RefreshTime&&(t.period=1e3*n.RefreshTime),n.RefreshMax&&(t.limit=n.RefreshMax),n.RefreshKeepSize&&(t.resizable="N"===n.RefreshKeepSize),t}}}},{key:"_shouldRotateFromComments",value:function(){var e=rt(this,ct).meta,t=e.AdTypePriority?parseInt(e.AdTypePriority):-1;if("N"===e.RefreshExclusive&&"N"===e.MP&&t>=493||"N"===e.RefreshReserved&&"N"===e.MP&&t>=200&&t<493)return!1;var n=this._isCommentPresent("RefreshMN");return!!(n=(n=n||this._isCommentPresent("RefreshSmall")&&!this._isLargeAd(rt(this,ct).content.size))||this._isCommentPresent("RefreshLarge")&&this._isLargeAd(rt(this,ct).content.size))}},{key:"_getEnvironmentRotationInfo",value:function(){var t={RefreshTime:rt(this,ct).meta.RefreshTime,RefreshMax:rt(this,ct).meta.RefreshMax,RefreshKeepSize:rt(this,ct).meta.RefreshKeepSize};t.RefreshTime=t.RefreshTime?parseInt(t.RefreshTime):void 0,t.RefreshMax=t.RefreshMax?parseInt(t.RefreshMax):void 0;var n={},i=rt(this,ut).inputConfig.client.features;return i&&i.rotation&&(i.rotation.period&&i.rotation.period>it.getRotationMinimumPeriod()&&(n.RefreshTime=i.rotation.period/1e3),i.rotation.limit&&(n.RefreshMax=i.rotation.limit),void 0!==i.rotation.resizable&&(n.RefreshKeepSize=i.rotation.resizable?"N":"Y")),Object.assign({},t,n,e.PAGE_ROTATION_INFO)}},{key:"_isCommentPresent",value:function(e){return Object.prototype.hasOwnProperty.call(rt(this,ct).meta,e)}},{key:"_isLargeAd",value:function(e){return e.width>=970||e.height>=600}},{key:"getRotationAdSizeAlias",value:function(e){var t;return e=e||rt(this,ct).content.size,this._isCommentPresent("RefreshSmall")&&!this._isLargeAd(e)?t=rt(this,ct).meta.RefreshSmall:this._isCommentPresent("RefreshLarge")&&this._isLargeAd(e)&&(t=rt(this,ct).meta.RefreshLarge),t}}])&&ot(t.prototype,n),i&&ot(t,i),e}(),ct=new WeakMap,ut=new WeakMap,lt=new WeakMap;!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(st,"PAGE_ROTATION_INFO",void 0);var ft=st;function ht(e,t){var n=e.cookie.split(";").reduce((function(e,n){var i=n.indexOf("="),o=n.substring(0,i).trim();return t===o&&(e=n.substring(i+1)),e}),"");return n||null}function pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function vt(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yt.set(this,{writable:!0,value:void 0}),gt.set(this,{writable:!0,value:void 0});var n=JSON.parse(JSON.stringify(t)),i=new it;n.client=n.client||{},n.service=n.service||{},n=e.applyDefaultPosition(n),n=i.applyDefaults(n);var o=ht(window.document,"BX");o&&(n.service.user.cookies.bxcookie=o),n=e.applyOverrides(n,window.location.href),vt(this,yt,n.service),vt(this,gt,n.client)}var t,n,i;return t=e,i=[{key:"applyDefaultPosition",value:function(e){var t=new it;if((e=JSON.parse(JSON.stringify(e))).client&&e.client.positions&&e.client.positions.DEFAULT){var n=e.client.positions.DEFAULT;delete e.client.positions.DEFAULT,Object.keys(e.client.positions).forEach((function(i){t.copyObjectProperties(e.client.positions[i],n,!0)}))}return e}},{key:"applyOverrides",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),i=Ze.getParameters(t,["jac.cp","jac.noad","jac.kvs","jac.rotate","jac.ip","atwCrPr","atwMN","atwKV"]),o=Object.keys(i).map((function(e){return"".concat(e,"=").concat(i[e])})),r=n.service.site.queryParams,a=r?[r]:[];n.service.site.queryParams=a.concat(o).join("&"),"1"===Ze.getParameter(t,"jac.debug")&&(n.service.debug=!0);var s=Ze.getParameter(t,"jac.sf");return Object.keys(n.client.positions).forEach((function(e){var t=n.client.positions[e];"1"===s&&(t.features.safeFrame.enabled=!0)})),n}}],(n=[{key:"setRegulatoryData",value:function(e){dt(this,yt).user.regs.gdpr.applies=e.data.GDPR.applies,dt(this,yt).user.regs.gdpr.euconsent=e.data.GDPR.euconsent,dt(this,yt).user.regs.ccpa.usPrivacy=e.data.CCPA.usPrivacy}},{key:"getPositionGroupsName",value:function(e){var t=this;return Object.keys(dt(this,yt).groups).filter((function(n){return-1!==dt(t,yt).groups[n].positions.indexOf(e)}))}},{key:"filterAllowedSizes",value:function(e){var t=this,n=JSON.parse(JSON.stringify(dt(this,yt)));return e.forEach((function(e){var i=e.name,o=e.allowedSize,r=dt(t,yt).positions[i];r&&r.sizes.indexOf(o)>=0&&(n.positions[i].sizes=[o])})),n}},{key:"createNextRotationConfig",value:function(e,t){var n;if(!e.config.client.features.rotation.resizable&&t){var i=t.width,o=t.height;i&&o&&(n=this.filterAllowedSizes([{name:e.name,allowedSize:"".concat(i,"x").concat(o)}]))}else n=JSON.parse(JSON.stringify(dt(this,yt)));var r=e.config.service.alias,a=n.positions[e.name];return a.alias&&r&&a.alias!==r&&(a.params.origmn=a.alias),r&&(a.alias=r),n}},{key:"isServiceConfigValid",value:function(){if(!dt(this,yt))return console.warn("No service config has been set."),!1;if(!dt(this,yt).adServer)return console.warn("No service.adServer config has been set."),!1;if(!dt(this,yt).positions)return console.warn("No service.positions config has been set."),!1;var e=dt(this,yt).adServer,t=Object.keys(Ue).filter((function(t){return e[t]}));if(0===t.length)return console.warn("No valid adServer config has been set."),!1;if(t.length>1)return console.warn("Only one adServer can be configured."),!1;if(-1!==t.indexOf(Ue["1AS"])){var n=e["1AS"],i=n.networkId,o=n.region;if(!i&&!o||i&&o)return console.warn("1AS adServer config requires either region or networkId to be set."),!1}return!dt(this,yt).host||/^https?:\/\/.*\//i.test(dt(this,yt).host)}},{key:"clone",value:function(){return JSON.parse(JSON.stringify({service:dt(this,yt),client:dt(this,gt)}))}},{key:"updateMeta",value:function(e,t,n,i){var o=!1,r=P.isString(t)&&P.isSet(n);return P.isObject(t)?(dt(this,gt).positions[e].meta=t,o=!0):P.isString(i)&&dt(this,gt).positions[e].meta[i]&&r?(dt(this,gt).positions[e].meta[i][t]=n,o=!0):r&&(dt(this,gt).positions[e].meta.shared[t]=n,o=!0),o}},{key:"service",get:function(){return dt(this,yt)}},{key:"client",get:function(){return dt(this,gt)}}])&&pt(t.prototype,n),i&&pt(t,i),e}(),yt=new WeakMap,gt=new WeakMap;function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Ot(e);if(t()){var o=Ot(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return bt(this,n)}}(n);function n(e,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).meta=i,o}return n}(c);_t(Tt,"FETCH_START","FETCH_START"),_t(Tt,"FETCH_COMPLETE","FETCH_COMPLETE"),_t(Tt,"FETCH_TIMEOUT","FETCH_TIMEOUT"),_t(Tt,"FETCH_ERROR","FETCH_ERROR"),_t(Tt,"RESPONSE_PROCESSED","RESPONSE_PROCESSED");var St=function(e,t,n){var i=document.createElement("script");i.src=e,i.onload=function(){return t()},i.onerror=function(e){return n(e)},(document.body?document.body:document.head).appendChild(i)};function Pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Dt={},kt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ct.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Ct,t)}var t,n,i;return t=e,(n=[{key:"process",value:function(){if(void 0!==window.JAC_QUEUE&&window.JAC_QUEUE.length>0){var e=window.JAC_QUEUE.shift();if(function(e,t){if(e&&e.client){var n=e.client,i=n.version,o=n.allowed;return i&&i!==t?(console.error("Client version in response from Jill does not match JAC.version."),!1):!!(i||o&&o.length&&-1!==o.indexOf(t))||(console.error("This version of JAC library is not allowed to process response from Jill. Please load JAC using client endpoint provided by Jill."),!1)}return!1}(e,Rt(this,Ct))){var t=this.getRequestUrl(e.client.requestId);return 0===e.client.requestId&&this.trigger(new Tt(Tt.FETCH_START,{request:{positions:e.adServerResponse.positions},prefetched:!0})),this.trigger(new Tt(Tt.RESPONSE_PROCESSED,{response:e,url:t})),e}}return null}},{key:"getRequestUrl",value:function(e){return Dt[e]}},{key:"fetchAds",value:function(t,n){var i=this,o={adServer:n.adServer,site:n.site,user:n.user,positions:{},requestId:e.REQUEST_ID++};n.debug&&(o.debug=!0),t.forEach((function(e){o.positions[e]=n.positions[e]}));var r=JSON.stringify(o),a="".concat(n.host).concat("v1/ads/js","?jacVersion=").concat(Rt(this,Ct))+"&config="+encodeURIComponent(r);Dt[o.requestId]=a,this.trigger(new Tt(Tt.FETCH_START,{request:o,url:a})),St(a,(function(){i.trigger(new Tt(Tt.FETCH_COMPLETE,{url:a}))}),(function(e){i.trigger(new Tt(Tt.FETCH_ERROR,{positionNames:t,scriptErrorEvent:e}))}))}},{key:"fetchGroupPositions",value:function(e,t,n){var i=(n=JSON.parse(JSON.stringify(n))).groups[e].params;return t.forEach((function(e){var t=n.positions[e].params;n.positions[e].params=Object.assign({},i,t)})),this.fetchAds(t,n)}}])&&Pt(t.prototype,n),i&&Pt(t,i),e}(),Ct=new WeakMap;!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kt,"REQUEST_ID",1),Object.assign(kt.prototype,A);var At=kt;function It(e){return"Invalid ".concat(e," argument. Object is expected")}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Ft(e);if(t()){var o=Ft(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Lt(this,n)}}(n);function n(){return Mt(this,n),t.apply(this,arguments)}return n}(c);function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wt(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function Ht(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xt,"CONFIG_UPDATE","CONFIG_UPDATE");var zt=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jt.set(this,{writable:!0,value:null}),Bt.set(this,{writable:!0,value:void 0}),Zt.set(this,{writable:!0,value:!1}),Vt(this,"name",void 0),Vt(this,"config",void 0),!P.isString(t))throw new Error("Invalid ".concat("name"," argument. String is expected"));this.name=t,this.update(n)}var t,n,i;return t=e,(n=[{key:"updateContainerType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config.client.features;"true"===e.friendlyIframe&&t.safeFrame.enabled?Wt(this,Bt,Be):t.safeFrame&&t.safeFrame.enabled?Wt(this,Bt,ze):t.nonFriendlyIframe&&t.nonFriendlyIframe.enabled?Wt(this,Bt,Je):Wt(this,Bt,Be)}},{key:"update",value:function(e){var t=e.service,n=e.client;if("object"!==Gt(t))throw new Error(It("service"));if("object"!==Gt(n))throw new Error(It("client"));this.config=function(e,t){var n=(new it).applyDefaults({service:{positions:Vt({},e,t.service)},client:{positions:Vt({},e,t.client)}});return{service:n.service.positions[e],client:n.client.positions[e]}}(this.name,e),this.updateContainerType(),this.trigger(new xt(xt.CONFIG_UPDATE,this.config))}},{key:"updateRotationConfig",value:function(e){var t=this;if(!e)return!1;var n=!1;return Object.keys(e).forEach((function(i){t.config.client.features.rotation[i]!==e[i]&&(n=!0)})),n&&(Object.keys(e).forEach((function(n){t.config.client.features.rotation[n]=e[n]})),this.trigger(new xt(xt.CONFIG_UPDATE,this.config))),n}},{key:"containerType",get:function(){return Ht(this,Bt)}},{key:"alias",set:function(e){if(e){var t=this.config.service.alias!==e;this.config.service.alias=e,t&&this.trigger(new xt(xt.CONFIG_UPDATE,this.config))}},get:function(){return this.config.service.alias}},{key:"inputConfig",get:function(){return Ht(this,Jt)},set:function(e){Wt(this,Jt,e)}},{key:"rotated",set:function(e){Wt(this,Zt,e)},get:function(){return Ht(this,Zt)}}])&&Ut(t.prototype,n),i&&Ut(t,i),e}(),Jt=new WeakMap,Bt=new WeakMap,Zt=new WeakMap;function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.assign(zt.prototype,A);var en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Qt(e);if(t()){var o=Qt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Kt(this,n)}}(n);function n(){return qt(this,n),t.apply(this,arguments)}return n}(c);$t(en,"RENDER_START","RENDER_START"),$t(en,"RENDER_COMPLETE","RENDER_COMPLETE"),$t(en,"AD_LOAD","AD_LOAD"),$t(en,"AD_LOAD_TIMEOUT","AD_LOAD_TIMEOUT"),$t(en,"NO_AD","NO_AD"),$t(en,"RESIZE","RESIZE"),$t(en,"SHOW","SHOW"),$t(en,"HIDE","HIDE"),$t(en,"DESTROY","DESTROY"),$t(en,"VIEW_START","VIEW_START"),$t(en,"VIEW_END","VIEW_END"),$t(en,"MOUSE_OUT","MOUSE_OUT"),$t(en,"AD_SIZE_CHANGED","AD_SIZE_CHANGED"),$t(en,"GEOMETRY_CHANGED","GEOMETRY_CHANGED"),$t(en,"AD_META_CHANGED","AD_META_CHANGED"),$t(en,"AD_MESSAGE","AD_MESSAGE"),$t(en,"SAFE_FRAME_GEOMETRY_CHANGED","SAFE_FRAME_GEOMETRY_CHANGED");var tn="auto";function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e,n=document.documentElement,i=t.innerWidth||n.clientWidth||0,o=t.innerHeight||n.clientHeight||0,r=t.screenLeft||t.screenX||0,a=r+i,s=t.screenTop||t.screenY||0,c=s+o;return{top:s,left:r,bottom:c,right:a,width:i,height:o}}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.getBoundingClientRect()||{},o=n.left,r=n.right,a=n.top,s=n.bottom,c=i.getComputedStyle(e,"z-index",t),u=r-o,l=s-a;return{left:o,right:r,top:a,bottom:s,width:u,height:l,zIndex:c}}var rn={getWindowGeometry:nn,getElementGeometry:on,getVisibilityMetrics:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=nn(i),r=o.width,a=o.height,s=on(e,i),c=s.width*s.height;if(s.width=s.width||1,s.height=s.height||1,s.right<=0||s.left>r)t=0;else{var u=Math.max(-s.left,0),l=Math.max(s.right-r,0);t=s.width-u-l}if(s.bottom<=0||s.top>a)n=0;else{var f=Math.max(-s.top,0),h=Math.max(s.bottom-a,0);n=s.height-f-h}return{containerPixels:c,xPercentage:t/s.width,yPercentage:n/s.height,totalPercentage:t*n/(c||1)}},isClippingElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"X",n=arguments.length>2?arguments[2]:void 0,o=(n=n||i.getComputedStyle(e))["overflow"+t],r=n.overflow;return"hidden"===o||"scroll"===o||o===tn||"hidden"===r||"scroll"===r||r===tn},isScrollableElement:function(e,t){var n=(t=t||i.getComputedStyle(e)).overflowX,o=t.overflowY,r=t.overflow,a="scroll"===n||"scroll"===r;a=a||(n===tn||r===tn)&&e.scrollWidth>e.clientWidth;var s="scroll"===o||"scroll"===r;return s=s||(o===tn||r===tn)&&e.scrollHeight>e.clientHeight,a||s}};function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=ln(e);if(t()){var o=ln(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return un(this,n)}}(n);function n(){return sn(this,n),t.apply(this,arguments)}return n}(c);function pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function vn(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}fn(hn,"RENDER_COMPLETE","RENDER_COMPLETE"),fn(hn,"AD_LOAD","AD_LOAD"),fn(hn,"AD_LOAD_TIMEOUT","AD_LOAD_TIMEOUT");var mn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yn.set(this,{writable:!0,value:void 0}),gn.set(this,{writable:!0,value:void 0}),wn.set(this,{writable:!0,value:{}}),En.set(this,{writable:!0,value:[]}),bn.set(this,{writable:!0,value:void 0}),vn(this,yn,t),vn(this,gn,n),vn(this,bn,n.position.config.client.features.safeFrame),vn(this,wn,Oe(dn(this,bn))),vn(this,En,n.position.config.service.sizes||[]),t.on(q.topic.SIZE,this._onSizeChange,this),t.on(q.topic.UNLOAD,this._onUnload,this),t.on(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),n.on(en.DESTROY,this.cleanup,this),n.on(en.SAFE_FRAME_GEOMETRY_CHANGED,this._sendSafeFrameGeometryUpdate,this),n.on(en.AD_META_CHANGED,this.positionMetaChanged,this),n.pageObserver.on(v.FOCUS,this._sendSafeFrameFocusUpdate,this),n.pageObserver.on(v.BLUR,this._sendSafeFrameFocusUpdate,this)}var t,n,i;return t=e,(n=[{key:"cleanup",value:function(){dn(this,gn).off(en.DESTROY,this.cleanup,this),dn(this,gn).off(en.SAFE_FRAME_GEOMETRY_CHANGED,this._sendSafeFrameGeometryUpdate,this),dn(this,gn).off(en.AD_META_CHANGED,this.positionMetaChanged,this),dn(this,yn).off(q.topic.SIZE,this._onSizeChange,this),dn(this,yn).off(q.topic.UNLOAD,this._onUnload,this),dn(this,yn).off(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),dn(this,gn).pageObserver.off(v.FOCUS,this._sendSafeFrameFocusUpdate,this),dn(this,gn).pageObserver.off(v.BLUR,this._sendSafeFrameFocusUpdate,this),dn(this,yn).cleanup()}},{key:"_onSizeChange",value:function(e){var t=e.message.meta,n=t.width,i=t.height;n&&i&&dn(this,En).indexOf("".concat(n,"x").concat(i))>=0&&dn(this,gn).setSize({width:n,height:i})}},{key:"_onUnload",value:function(){this.cleanup(),dn(this,gn).unloadAd()}},{key:"_onSafeFrameMessage",value:function(e){var t=e.message,n=t.cmd,i=t.meta;if(!1!==dn(this,wn)[n])switch(n){case te.cmd.EXPAND_OVER:case te.cmd.EXPAND_PUSH:this._expand(i,n===te.cmd.EXPAND_PUSH),this._sendStatusUpdate(te.status.EXPANDED,{cmd:n});break;case te.cmd.COLLAPSE:this._collapse(),this._sendStatusUpdate(te.status.COLLAPSED,{cmd:n});break;case te.cmd.READ_COOKIE:this._readCookie(i.cookieName);break;case te.cmd.WRITE_COOKIE:this._writeCookie(i.cookieName,i.cookieData);break;case te.cmd.MSG:this._receivedAdMessage(i);break;case te.cmd.RESIZE_TO:this._resizeTo(i)}else this._sendFailure({cmd:n,reason:"Feature not supported by the host."})}},{key:"_expand",value:function(e){var t=e.top,n=e.left,i=e.right,o=e.bottom,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=P.int(t,0,0),n=P.int(n,0,0),i=P.int(i,0,0),o=P.int(o,0,0);var a=dn(this,gn).size,s={width:a.width+i+n,height:a.height+o+t};r||(s.dx=-n,s.dy=-t),dn(this,gn).updateGeometry(s,r)}},{key:"_collapse",value:function(){dn(this,gn).resetGeometry()}},{key:"_resizeTo",value:function(e){var t=e.width,n=e.height;t=P.int(t,0,0),n=P.int(n,0,0),dn(this,gn).setSize({width:t,height:n}),this._sendStatusUpdate(te.status.RESIZE_TO,{cmd:te.cmd.RESIZE_TO,info:{w:t,h:n}})}},{key:"_readCookie",value:function(e){var t=ht(window.document,e),n=te.cmd.READ_COOKIE;this._sendStatusUpdate(te.status.READ_COOKIE,{cmd:n,info:t})}},{key:"_writeCookie",value:function(e,t){t.value&&t.value.length>1e3&&(t.value=t.value.substring(0,1e3)),t.expires=t.expires||null,t.expires&&"[object Date]"!==Object.prototype.toString.call(t.expires)&&(t.expires=null),function(e,t,n){if(n&&"string"==typeof n.value){var i=t+"="+n.value;n.expires&&(i+="; expires="+n.expires.toUTCString()),e.cookie=i}}(window.document,e,t);var n=te.cmd.WRITE_COOKIE;this._sendStatusUpdate(te.status.WRITE_COOKIE,{cmd:n,info:t.value})}},{key:"_receivedAdMessage",value:function(e){dn(this,gn).adMessageReceived(e)}},{key:"_sendStatusUpdate",value:function(e,t){var n=t.cmd,i=t.reason,o=t.info;this.messenger.send(new te({status:e,meta:{cmd:n,reason:i,info:o}}))}},{key:"_sendFailure",value:function(e){var t=e.cmd,n=e.reason,i=e.info;this._sendStatusUpdate(te.status.FAILED,{cmd:t,reason:n,info:i})}},{key:"positionMetaChanged",value:function(e){dn(this,bn)&&dn(this,bn).enabled?this._sendStatusUpdate(te.status.META_UPDATE,{info:e.meta}):console.warn("Messages can be sent only to SafeFrame positions.")}},{key:"_sendSafeFrameGeometryUpdate",value:function(e){dn(this,yn).send(new te({status:te.status.GEOMETRY_UPDATE,meta:{info:e.meta}}))}},{key:"_sendSafeFrameFocusUpdate",value:function(e){dn(this,yn).send(new te({status:te.status.FOCUS_CHANGE,meta:{info:e.type===v.FOCUS}}))}},{key:"messenger",get:function(){return dn(this,yn)}},{key:"component",get:function(){return dn(this,gn)}}])&&pn(t.prototype,n),i&&pn(t,i),e}(),yn=new WeakMap,gn=new WeakMap,wn=new WeakMap,En=new WeakMap,bn=new WeakMap;function On(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return t&&On(e.prototype,t),n&&On(e,n),e}function Tn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Sn(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function Pn(){return Math.floor(1e7*Math.random()).toString()}function Rn(e,t){var n,o,r={id:"jacSandbox_"+Pn(),name:JSON.stringify(e),title:"Advertisement",itemtype:"https://web.archive.org/web/20200805040542/https://schema.org/WPAdBlock",itemscope:"",tabindex:"-1",allowtransparency:"true",scrolling:"no"},a=t.features.sandbox;a&&(r.sandbox=a.allow.map((function(e){return"allow-".concat(e)})).join(" "),r.allow=(n=a.features,o=[],Object.keys(n).forEach((function(e){var t=n[e];if(t.enabled){var i=[];i.push(e),t.allow&&t.allow.forEach((function(e){0===(e=e.trim()).indexOf("https:")?i.push(e):0===e.indexOf("http:")?i.push(e.replace("http:","https:")):i.push("https://"+e)})),o.push(i.join(" "))}})),o.join(";")),a.features.fullscreen.enabled&&(r.allowfullscreen=!0));var s=document.createElement("iframe");Object.keys(r).forEach((function(e){s.setAttribute(e,r[e])}));var c=e.adData.content.size,u=c.width,l=c.height;return i.setStyles(s,{position:"absolute",top:"0",left:"0",width:"".concat(u,"px"),height:"".concat(l,"px"),border:"0",overflow:"hidden",zIndex:t.layout.zIndex}),s}function Dn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.children,i=n.length-1;i>=0;i--)n[i]!==t&&e.removeChild(n[i])}var kn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Cn.set(this,{writable:!0,value:void 0}),An.set(this,{writable:!0,value:void 0}),In.set(this,{writable:!0,value:void 0}),Sn(this,Cn,t)}return _n(e,null,[{key:"create",value:function(t){return new e(t)}}]),_n(e,[{key:"render",value:function(e){var t=e.clientBaseUrl;if(t){var n=Tn(this,Cn).position,i=Tn(this,Cn).element,o={adData:e,token:Pn()},r=n.containerType;r===ze&&function(e,t){e.safeFrame={geom:t.safeFrameGeometry.buildGeometry(),focus:t.pageObserver.hasFocus,meta:t.position.config.client.meta}}(o,Tn(this,Cn));var a=Sn(this,An,Rn(o,n.config.client));Tn(this,In)&&Tn(this,In).cleanup(),Dn(i,a),r===ze?a.src="".concat(t,"/safeframe.html"):r===Je&&(a.src="".concat(t,"/sandbox.html")),i.appendChild(a),Sn(this,In,function(e,t,n,i){var o=n.position.config.client.render.timeout||5e3,r=!1,a=new pe(e.contentWindow,t.token);return a.listen(),a.on(q.topic.WRITE_COMPLETE,(function(){e.removeAttribute("name"),i.trigger(new hn(hn.RENDER_COMPLETE))})),a.on(q.topic.PAGE_LOAD,(function(){r||(r=!0,i.trigger(new hn(hn.AD_LOAD)))})),setTimeout((function(){r||(r=!0,e.removeAttribute("name"),i.trigger(new hn(hn.AD_LOAD_TIMEOUT)))}),o),new mn(a,n)}(a,o,Tn(this,Cn),this)),r===Be&&function(e,t){var n=e.contentWindow.document;n.open(),n.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>html,body{margin:0;padding:0}</style></head><body><script src="'+t+'"><\/script><script>var inFIF=true,inDapIF=true;<\/script></body></html>'),n.close()}(a,"".concat(t,"/jac.js"))}else console.error("Rendering aborted: URL of JAC library not defined.")}},{key:"clear",value:function(){Dn(Tn(this,Cn).element)}},{key:"reset",value:function(){Tn(this,Cn).element.parentNode.removeChild(Tn(this,Cn).element)}},{key:"resize",value:function(e){var t=e.width,n=e.height,o=e.top,r=void 0===o?0:o,a=e.left,s=void 0===a?0:a;e.resizeContainer&&i.setStyles(Tn(this,Cn).element,{position:"relative",width:"".concat(t,"px"),height:"".concat(n,"px")}),Tn(this,An)&&i.setStyles(Tn(this,An),{width:"".concat(t,"px"),height:"".concat(n,"px"),top:"".concat(r,"px"),left:"".concat(s,"px")})}},{key:"sandbox",get:function(){return Tn(this,In)}}]),e}(),Cn=new WeakMap,An=new WeakMap,In=new WeakMap;Object.assign(kn.prototype,A);var Nn=kn;function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Mn(this,e),Ln(this,"offsetTop",void 0),Ln(this,"offsetLeft",void 0),Ln(this,"offsetBottom",void 0),Ln(this,"offsetRight",void 0),Ln(this,"width",void 0),Ln(this,"height",void 0),this.offsetTop=t,this.offsetRight=n,this.offsetBottom=i,this.offsetLeft=o,this.width=Math.max(this.offsetRight-this.offsetLeft,0),this.height=Math.max(this.offsetBottom-this.offsetTop,0)}var t,n,i;return t=e,(n=[{key:"normalize",value:function(){this.offsetTop=Math.max(this.offsetTop,0),this.offsetLeft=Math.max(this.offsetLeft,0),this.offsetRight=Math.max(this.offsetRight,0),this.offsetBottom=Math.max(this.offsetBottom,0),this.width=Math.max(this.offsetRight-this.offsetLeft,0),this.height=Math.max(this.offsetBottom-this.offsetTop,0)}},{key:"toSafeFrameClip",value:function(){return{t:this.offsetTop,r:this.offsetRight,b:this.offsetBottom,l:this.offsetLeft,w:this.width,h:this.height}}},{key:"getOffsetDifference",value:function(e){var t={top:0,right:0,bottom:0,left:0};return this.offsetTop>e.offsetTop&&this.offsetTop<e.offsetBottom&&(t.top=this.offsetTop-e.offsetTop),this.offsetBottom<e.offsetBottom&&this.offsetBottom>e.offsetTop&&(t.bottom=e.offsetBottom-this.offsetBottom),this.offsetRight<e.offsetRight&&this.offsetRight>e.offsetLeft&&(t.right=e.offsetRight-this.offsetRight),this.offsetLeft>e.offsetLeft&&this.offsetLeft<e.offsetRight&&(t.left=this.offsetLeft-e.offsetLeft),t}},{key:"addHorizontalClipping",value:function(e,t){e>this.offsetLeft&&(this.offsetLeft=e),t<this.offsetRight&&(this.offsetRight=t)}},{key:"addVerticalClipping",value:function(e,t){e>this.offsetTop&&(this.offsetTop=e),t<this.offsetBottom&&(this.offsetBottom=t)}}])&&jn(t.prototype,n),i&&jn(t,i),e}();function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Un(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Wn(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=rn.getElementGeometry(e,t),i=a.getPageScollInfo(),o={t:n.top,l:n.left,b:n.bottom,r:n.right,w:n.width,h:n.height,z:n.zIndex};return(i.y||i.x)&&(o.l+=i.x,o.t+=i.y),o.b=o.t+n.height,o.r=o.l+n.width,Object.keys(o).forEach((function(e){"number"==typeof o[e]&&(o[e]=Math.round(o[e]))})),o}var Vn=function(){function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;xn(this,e),zn.set(this,{writable:!0,value:void 0}),Jn.set(this,{writable:!0,value:void 0}),Bn.set(this,{writable:!0,value:void 0}),Zn.set(this,{writable:!0,value:void 0}),Wn(this,zn,t),Wn(this,Jn,n),Wn(this,Bn,o),Wn(this,Zn,m((function(){return i.dispatchGeometryChange()}),1e3)),o.addEventListener("scroll",Un(this,Zn),!1),o.addEventListener("resize",Un(this,Zn),!1)}var t,n,o;return t=e,(n=[{key:"buildGeometry",value:function(){return{win:this.buildWindowGeometry(),self:this.buildSelfGeometry(),exp:this.buildExpandableGeometry()}}},{key:"winHasFocus",value:function(){return Un(this,zn).hasFocus}},{key:"dispatchGeometryChange",value:function(){this.trigger(new c(e.GEOMETRY_UPDATE,this.buildGeometry()))}},{key:"destroy",value:function(){Un(this,Bn).removeEventListener("scroll",Un(this,Zn),!1),Un(this,Bn).removeEventListener("resize",Un(this,Zn),!1)}},{key:"buildWindowGeometry",value:function(){var e=a.getWindowLocation(),t=a.getViewportDimension();return{t:e.y,l:e.x,w:t.w,h:t.h,r:t.w+e.x,b:t.h+e.y}}},{key:"buildSelfGeometry",value:function(){var e=Hn(Un(this,Jn),Un(this,Bn)),t=rn.getVisibilityMetrics(Un(this,Jn),Un(this,Bn));return e.xiv=parseFloat(t.xPercentage.toFixed(2)),e.yiv=parseFloat(t.yPercentage.toFixed(2)),e.iv=parseFloat(t.totalPercentage.toFixed(2)),e}},{key:"buildExpandableGeometry",value:function(){var e=a.getPageScollInfo(),t=Hn(Un(this,Jn)),n=rn.getWindowGeometry(),o=a.getDocumentElement(),r={t:e.y,l:e.x,w:n.width,h:n.height,b:e.y+n.height,r:e.x+n.width},s=new Fn(r.t,r.r,r.b,r.l),c=function(e,t,n){for(var o,r,s,c=a.getPageScollInfo(),u=i.getComputedStyle(e);u;){var l=e===n;if("block"===u.display||"absolute"===u.position||"none"!==u.float){var f=Hn(e),h=f.t,p=f.l,d=f.r,v=f.b,m=e.offsetWidth,y=e.offsetHeight,g=e.clientWidth,w=e.clientHeight;!o&&m>g&&(o=m-g),!r&&y>w&&(r=y-w),l?(e.scrollWidth>g&&(p=0,d=(window.innerWidth||m)+c.x,window.innerWidth&&window.innerWidth>g&&(d-=window.innerWidth-g),t.addHorizontalClipping(p,d)),e.scrollHeight>w&&(h=0,v=(window.innerHeight||y)+c.y,window.innerHeight&&window.innerHeight>w&&(v-=window.innerHeight-w),t.addVerticalClipping(h,v))):(o&&d-p===m&&(d-=o),r&&v-h===y&&(v-=r),rn.isClippingElement(e,"X",u)&&t.addHorizontalClipping(p,d),rn.isClippingElement(e,"Y",u)&&t.addVerticalClipping(h,v),!s&&rn.isScrollableElement(e,u)&&(s=e))}if(l)break;if(!(e=e.parentNode))break;u=i.getComputedStyle(e)}return{scrollParent:s,xScrollBarHeight:r,yScrollBarWidth:o}}(Un(this,Jn),s,o);s.normalize();var u=new Fn(t.t,t.r,t.b,t.l).getOffsetDifference(s),l={t:u.top,b:u.bottom,l:u.left,r:u.right};return c.scrollParent?(l.xs=!!c.xScrollBarHeight,l.ys=!!c.yScrollBarWidth):(l.xs=!!(o.scrollWidth>o.clientWidth),l.ys=!!(o.scrollHeight>o.clientHeight)),l}}])&&Gn(t.prototype,n),o&&Gn(t,o),e}(),zn=new WeakMap,Jn=new WeakMap,Bn=new WeakMap,Zn=new WeakMap;!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vn,"GEOMETRY_UPDATE","GEOMETRY_UPDATE"),Object.assign(Vn.prototype,A);var Yn=Vn;function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function ei(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var ti=function(){function e(t,n,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;Xn(this,e),ni.set(this,{writable:!0,value:void 0}),ii.set(this,{writable:!0,value:void 0}),oi.set(this,{writable:!0,value:void 0}),ri.set(this,{writable:!0,value:void 0}),ai.set(this,{writable:!0,value:void 0}),si.set(this,{writable:!0,value:!1}),ci.set(this,{writable:!0,value:!1}),ui.set(this,{writable:!0,value:!1}),li.set(this,{writable:!0,value:!1}),fi.set(this,{writable:!0,value:void 0}),hi.set(this,{writable:!0,value:void 0}),pi.set(this,{writable:!0,value:void 0}),di.set(this,{writable:!0,value:!0}),vi.set(this,{writable:!0,value:void 0}),mi.set(this,{writable:!0,value:void 0}),Qn(this,"position",void 0),Qn(this,"element",void 0),Qn(this,"renderer",void 0),this.position=t,this.element=n,ei(this,ni,i),ei(this,pi,r),this.renderer=Nn.create(this),this.renderer.on(hn.RENDER_COMPLETE,this._onRenderComplete,this),this.renderer.on(hn.AD_LOAD,this._onAdLoad,this),this.renderer.on(hn.AD_LOAD_TIMEOUT,this._onAdLoadTimeOut,this),ei(this,ri,(function(){return o._onMouseOver()})),ei(this,ai,(function(){return o._onMouseOut()})),this.element.addEventListener("mouseover",$n(this,ri)),this.element.addEventListener("mouseout",$n(this,ai)),t.containerType===ze&&this._addSafeFrameGeometry()}var t,n,o;return t=e,(n=[{key:"_addSafeFrameGeometry",value:function(){var e=this;ei(this,vi,new Yn($n(this,ni),this.element,$n(this,pi))),ei(this,mi,(function(t){e.position.containerType===ze&&e.trigger(new en(en.SAFE_FRAME_GEOMETRY_CHANGED,t.meta))})),$n(this,vi).on(Yn.GEOMETRY_UPDATE,$n(this,mi),this)}},{key:"_removeSafeFrameGeometry",value:function(){$n(this,vi).destroy(),$n(this,vi).off(Yn.GEOMETRY_UPDATE,$n(this,mi),this),ei(this,vi,null)}},{key:"_processAndInjectAd",value:function(){ei(this,ui,!1),$n(this,ii).status!==Ve?(this.trigger(new en(en.RENDER_START,{name:this.position.name})),$n(this,ii).status===He&&(ei(this,di,!1),ve.isMobileMomentAd($n(this,ii))&&($n(this,ii).content.size=ve.computeDisplaySize(this.position)),this.setSize($n(this,ii).content.size),this.renderer.render($n(this,ii)))):this.unloadAd()}},{key:"render",value:function(e){var t=this;ei(this,ui,!0),ei(this,ii,e),this.position.updateContainerType(e.meta),!$n(this,oi)&&$n(this,ni)&&(ei(this,oi,(function(){return t._pageStateChanged()})),$n(this,ni).on(v.SCROLL,$n(this,oi)),$n(this,ni).on(v.RESIZE,$n(this,oi)),$n(this,ni).on(v.VISIBILITY,$n(this,oi))),this._pageStateChanged(),this.position.config.client.render.requireViewable||this._processAndInjectAd()}},{key:"show",value:function(){i.setStyles(this.element,{display:"block"}),this.trigger(new en(en.SHOW))}},{key:"hide",value:function(){i.setStyles(this.element,{display:"none"}),this.trigger(new en(en.HIDE))}},{key:"destroy",value:function(){$n(this,ni).off(v.SCROLL,$n(this,oi)),$n(this,ni).off(v.RESIZE,$n(this,oi)),$n(this,ni).off(v.VISIBILITY,$n(this,oi)),this.renderer.off(hn.RENDER_COMPLETE,this._onRenderComplete,this),this.renderer.off(hn.AD_LOAD,this._onAdLoad,this),this.renderer.off(hn.AD_LOAD_TIMEOUT,this._onAdLoadTimeOut,this),this.element.removeEventListener("mouseover",$n(this,ri)),this.element.removeEventListener("mouseout",$n(this,ai)),this.renderer.reset(),ei(this,di,!0),$n(this,vi)&&this._removeSafeFrameGeometry(),this.trigger(new en(en.DESTROY))}},{key:"updateGeometry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ei(this,si,!0),this.renderer.resize({width:e.width,height:e.height,top:e.dy||0,left:e.dx||0,resizeContainer:t});var n=this.getGeometry();this.trigger(new en(en.RESIZE,n))}},{key:"resetGeometry",value:function(){if(ei(this,si,!1),$n(this,fi)){this.renderer.resize({width:$n(this,fi).width,height:$n(this,fi).height,top:0,left:0,resizeContainer:!0});var e=this.getGeometry();this.trigger(new en(en.RESIZE,e))}}},{key:"getGeometry",value:function(){return rn.getElementGeometry(this.element)}},{key:"_isAreaInView",value:function(){var e=this.position.config.client.instrumentation,t=e.viewability.percent/100,n=rn.getVisibilityMetrics(this.element,$n(this,pi)),i=n.totalPercentage>=t,o=0;return e.viewability.pixels>0&&(o=n.totalPercentage*n.containerPixels),i||e.viewability.pixels>0&&o>=e.viewability.pixels}},{key:"unloadAd",value:function(){this.hide(),this.renderer.clear(),ei(this,di,!0),ei(this,fi,null),this.trigger(new en(en.NO_AD,{name:this.position.name}))}},{key:"setSize",value:function(e){ve.isMobileMomentAd($n(this,ii))||$n(this,fi)&&$n(this,fi).width===e.width&&$n(this,fi).height===e.height||(ei(this,fi,e),this.renderer.resize({width:e.width,height:e.height,resizeContainer:!0}),this.trigger(new en(en.AD_SIZE_CHANGED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){Qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:this.position.name},$n(this,fi)))))}},{key:"_pageStateChanged",value:function(){var e=this;this._isAreaInView()&&$n(this,ni).isVisible?$n(this,hi)||($n(this,di)?this._viewTimeCounterElapsed():ei(this,hi,$n(this,pi).setTimeout((function(){return e._viewTimeCounterElapsed()}),1e3))):($n(this,hi)&&ei(this,hi,$n(this,pi).clearTimeout($n(this,hi))),this._changeViewabilityState(!1)),this.trigger(new en(en.GEOMETRY_CHANGED))}},{key:"_viewTimeCounterElapsed",value:function(){ei(this,hi,$n(this,pi).clearTimeout($n(this,hi)));var e=this.position.config,t=this._isAreaInView();this._changeViewabilityState(t),e.client.render.requireViewable&&$n(this,ui)&&t&&this._processAndInjectAd()}},{key:"_changeViewabilityState",value:function(e){e!==$n(this,li)&&(ei(this,li,e),this._fireVisibilityEvent(e))}},{key:"_fireVisibilityEvent",value:function(e){var t=e?en.VIEW_START:en.VIEW_END;this.trigger(new en(t,{name:this.position.name}))}},{key:"_onRenderComplete",value:function(){this.trigger(new en(en.RENDER_COMPLETE,this.adSize))}},{key:"_onAdLoad",value:function(){this.trigger(new en(en.AD_LOAD))}},{key:"_onAdLoadTimeOut",value:function(){this.trigger(new en(en.AD_LOAD_TIMEOUT))}},{key:"_onMouseOver",value:function(){ei(this,ci,!0)}},{key:"_onMouseOut",value:function(){ei(this,ci,!1),this.trigger(new en(en.MOUSE_OUT,{name:this.position.name}))}},{key:"updateMeta",value:function(){this.trigger(new en(en.AD_META_CHANGED,this.position.config.client.meta))}},{key:"adMessageReceived",value:function(e){this.trigger(new en(en.AD_MESSAGE,e))}},{key:"isInView",get:function(){return $n(this,li)}},{key:"isExpanded",get:function(){return $n(this,si)}},{key:"hasMouseOver",get:function(){return $n(this,ci)}},{key:"size",get:function(){return $n(this,fi)||{}}},{key:"adData",get:function(){return $n(this,ii)}},{key:"safeFrameGeometry",get:function(){return $n(this,vi)}},{key:"pageObserver",get:function(){return $n(this,ni)}}])&&Kn(t.prototype,n),o&&Kn(t,o),e}(),ni=new WeakMap,ii=new WeakMap,oi=new WeakMap,ri=new WeakMap,ai=new WeakMap,si=new WeakMap,ci=new WeakMap,ui=new WeakMap,li=new WeakMap,fi=new WeakMap,hi=new WeakMap,pi=new WeakMap,di=new WeakMap,vi=new WeakMap,mi=new WeakMap;Object.assign(ti.prototype,A);var yi=ti;function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Oi(e);if(t()){var o=Oi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return bi(this,n)}}(n);function n(){return wi(this,n),t.apply(this,arguments)}return n}(c);function Ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Si(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_i,"ROTATION","ROTATION");var Pi=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ri.set(this,{writable:!0,value:5e3}),Di.set(this,{writable:!0,value:void 0}),ki.set(this,{writable:!0,value:{}}),Ci.set(this,{writable:!0,value:{}}),n===n.top&&(!function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Di,t),Si(this,Di).on(v.VISIBILITY,(function(e){return i._pageVisibleChanged(e)}),this))}var t,n,i;return t=e,(n=[{key:"schedule",value:function(e){var t=e.config.client.features.rotation;Si(this,ki)[e.name]?console.warn("Position ".concat(e.name," is already a scheduler managed resource.")):t.enabled?t.limit<1?console.warn("Position ".concat(e.name," should have a positive integer rotation limit.")):Si(this,ki)[e.name]={name:e.name,rotationCount:0,rotationConfig:JSON.parse(JSON.stringify(t))}:console.warn("Position ".concat(e.name," has rotation disabled."))}},{key:"update",value:function(e){var t=e.config.client.features.rotation;if(Si(this,ki)[e.name]){var n=Si(this,ki)[e.name].rotationConfig.enabled;Si(this,ki)[e.name].rotationConfig=JSON.parse(JSON.stringify(t)),Si(this,Ci)[e.name]&&(n&&!t.enabled?(this._clearRotationTimer(e.name),this._removePositionObservers(Si(this,Ci)[e.name])):!n&&t.enabled&&this._addPositionObservers(Si(this,Ci)[e.name]))}else console.warn("Position ".concat(e.name," is not a scheduler managed resource."))}},{key:"remove",value:function(e){Si(this,ki)[e.name]?Si(this,ki)[e.name].rotationConfig.cancellable?this._clearRegistryEntry(e.name):console.warn("Position ".concat(e.name," is not cancellable.")):console.warn("Position ".concat(e.name," is not a scheduler managed position."))}},{key:"restart",value:function(e,t){e.rotated=!1,this._clearRegistryEntry(e.name),this.schedule(e),t&&(this.unsubscribe(t),this.subscribe(t))}},{key:"subscribe",value:function(e){var t=e.position.name;e.position.config.client.features.rotation.enabled&&(Si(this,Ci)[t]?console.warn("PositionComponent for position ".concat(t," is already subscribed.")):(Si(this,Ci)[t]=e,this._addPositionObservers(e)))}},{key:"unsubscribe",value:function(e){var t=e.position.name;Si(this,Ci)[t]?(this._removePositionObservers(e),delete Si(this,Ci)[t]):console.warn("PositionComponent for position ".concat(t," is not a subscribed entry."))}},{key:"positionPeriodElapsed",value:function(e){var t=Si(this,ki)[e],n=Si(this,Ci)[e];n&&n.hasMouseOver?t.waitingForMouseToLeave=!0:(t.waitingToBeInView=!0,Si(this,Di).isVisible&&(t.rotationConfig.requireViewable?n&&n.isInView&&this._startRotation(e):this._startRotation(e)))}},{key:"_renderStartedForPosition",value:function(e){var t=e.meta.name,n=Si(this,ki)[t];n.rotationCount<n.rotationConfig.limit&&this._scheduleTimeout(t,n.rotationConfig.period)}},{key:"_mouseLeftForPosition",value:function(e){var t=this,n=e.meta.name,i=Si(this,ki)[n];i.waitingForMouseToLeave&&(Si(this,ki)[n].timeout=setTimeout((function(){t.positionPeriodElapsed(n)}),Si(this,Ri)),i.waitingForMouseToLeave=!1)}},{key:"_viewStartedForPosition",value:function(e){var t=e.meta.name;Si(this,ki)[t].waitingToBeInView&&this.positionPeriodElapsed(t)}},{key:"_scheduleTimeout",value:function(e,t){var n=this;Si(this,ki)[e].timeout=setTimeout((function(){n.positionPeriodElapsed(e)}),t)}},{key:"_clearRegistryEntry",value:function(e){this._clearRotationTimer(e),delete Si(this,ki)[e]}},{key:"_clearRotationTimer",value:function(e){Si(this,ki)[e]&&Si(this,ki)[e].timeout&&clearTimeout(Si(this,ki)[e].timeout)}},{key:"_addPositionObservers",value:function(e){e.on(en.RENDER_START,this._renderStartedForPosition,this),e.on(en.MOUSE_OUT,this._mouseLeftForPosition,this),e.on(en.VIEW_START,this._viewStartedForPosition,this)}},{key:"_removePositionObservers",value:function(e){e.off(en.RENDER_START,this._renderStartedForPosition,this),e.off(en.MOUSE_OUT,this._mouseLeftForPosition,this),e.off(en.VIEW_START,this._viewStartedForPosition,this)}},{key:"_startRotation",value:function(e){var t={positionName:e},n=Si(this,ki)[e];n.waitingToBeInView=!1,n.waitingForMouseToLeave=!1,n.rotationCount++,Si(this,Ci)[e]&&(t.size=Si(this,Ci)[e].size),this.trigger(new _i(_i.ROTATION,t))}},{key:"_pageVisibleChanged",value:function(){this._checkPositionsStatusOnPageChange()}},{key:"_checkPositionsStatusOnPageChange",value:function(){var e=this;Si(this,Di).isVisible&&Object.keys(Si(this,ki)).filter((function(t){return Si(e,ki)[t].waitingToBeInView})).forEach((function(t){return e.positionPeriodElapsed(t)}))}},{key:"isManagedPosition",value:function(e){return!!Si(this,ki)[e]}},{key:"registry",get:function(){return Si(this,ki)}},{key:"positionComponents",get:function(){return Si(this,Ci)}}])&&Ti(t.prototype,n),i&&Ti(t,i),e}(),Ri=new WeakMap,Di=new WeakMap,ki=new WeakMap,Ci=new WeakMap;Object.assign(Pi.prototype,A);var Ai=Pi;function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Li(e);if(t()){var o=Li(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ji(this,n)}}(n);function n(){return Ni(this,n),t.apply(this,arguments)}return n}(c);Fi(xi,"FETCH_START","FETCH_START"),Fi(xi,"FETCH_COMPLETE","FETCH_COMPLETE"),Fi(xi,"FETCH_TIMEOUT","FETCH_TIMEOUT"),Fi(xi,"FETCH_ERROR","FETCH_ERROR"),Fi(xi,"RENDER_START","RENDER_START"),Fi(xi,"RENDER_COMPLETE","RENDER_COMPLETE"),Fi(xi,"POSITION_CREATED","POSITION_CREATED"),Fi(xi,"POSITION_ROTATE","POSITION_ROTATE"),Fi(xi,"POSITION_RENDER_START","POSITION_RENDER_START"),Fi(xi,"POSITION_RENDER_COMPLETE","POSITION_RENDER_COMPLETE"),Fi(xi,"POSITION_COLLAPSED","POSITION_COLLAPSED"),Fi(xi,"POSITION_VIEW_START","POSITION_VIEW_START"),Fi(xi,"POSITION_VIEW_END","POSITION_VIEW_END"),Fi(xi,"POSITION_CONFIG_CHANGED","POSITION_CONFIG_CHANGED"),Fi(xi,"AD_LOAD_COMPLETE","AD_LOAD_COMPLETE"),Fi(xi,"AD_SIZE_CHANGED","AD_SIZE_CHANGED"),Fi(xi,"AD_MESSAGE","AD_MESSAGE");var Gi=xi;var Ui=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"usPrivacy","")};function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hi=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wi(this,"applies",null),Wi(this,"euconsent","")};function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bi(e,t){return!t||"object"!==Vi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=Zi(e);if(t()){var o=Zi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Bi(this,n)}}(n);function n(){return zi(this,n),t.apply(this,arguments)}return n}(c);function Xi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ki(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Qi(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}Yi(qi,"API_NOT_FOUND","REGS.API_NOT_FOUND"),Yi(qi,"READ_TIMEOUT","REGS.READ_TIMEOUT"),Yi(qi,"RESOLVED","REGS.RESOLVED"),Yi(qi,"UPDATED","REGS.UPDATED");var $i,eo="gdpr",to="ccpa",no=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),io.set(this,{writable:!0,value:0}),oo.set(this,{writable:!0,value:void 0}),ro.set(this,{writable:!0,value:!1}),ao.set(this,{writable:!0,value:{}}),so.set(this,{writable:!0,value:void 0}),Qi(this,oo,{CCPA:new Ui,GDPR:new Hi})}var t,n,i;return t=e,(n=[{key:"resolve",value:function(e,t){if(!Ki(this,ro))return Qi(this,ro,!0),Qi(this,so,e),t?(Qi(this,io,null),void this._setDataFromConfig(t)):"function"!=typeof Ki(this,so).__cmp&&"function"!=typeof Ki(this,so).__uspapi&&"function"!=typeof Ki(this,so).__tcfapi?(Qi(this,io,null),void this.trigger(new qi(qi.API_NOT_FOUND))):void this._readRegulatoryData()}},{key:"_dispatchRegulationsResolvedEvent",value:function(){this.trigger(new qi(qi.RESOLVED))}},{key:"_dispatchRegulationsUpdatedEvent",value:function(){this.trigger(new qi(qi.UPDATED))}},{key:"_regulationResolved",value:function(e){Ki(this,ao)[e]&&delete Ki(this,ao)[e],0===Object.keys(Ki(this,ao)).length&&(null===Ki(this,io)?this._dispatchRegulationsUpdatedEvent():(clearTimeout(Ki(this,io)),Qi(this,io,null),this._dispatchRegulationsResolvedEvent()))}},{key:"_setDataFromConfig",value:function(e){e.gdpr&&(e.gdpr.euconsent?(Ki(this,oo).GDPR.applies=1,Ki(this,oo).GDPR.euconsent=""+e.gdpr.euconsent):Ki(this,oo).GDPR.applies=["","0","false",!1,0,void 0,null].indexOf(e.gdpr.applies)>-1?0:1),e.ccpa&&e.ccpa.usPrivacy&&(Ki(this,oo).CCPA.usPrivacy=""+e.ccpa.usPrivacy),this._dispatchRegulationsResolvedEvent()}},{key:"_readCCPAData",value:function(){var e=this;Ki(this,so).__uspapi("getUSPData",1,(function(t,n){n&&(Ki(e,oo).CCPA.usPrivacy=t.uspString||"",e._regulationResolved(to))}))}},{key:"_readTCFv1Data",value:function(){var e=this;Ki(this,so).__cmp("getConsentData",null,(function(t,n){n&&(Ki(e,oo).GDPR.applies=!1===t.gdprApplies?0:1,Ki(e,oo).GDPR.euconsent=t.consentData||"",e._regulationResolved(eo))}))}},{key:"_readTCFv2Data",value:function(){var e=this;Ki(this,so).__tcfapi("addEventListener",2,(function(t,n){if(("error"===t.cmpStatus||!n)&&"function"==typeof Ki(e,so).__cmp&&Ki(e,ao)[eo])return Ki(e,so).__tcfapi("removeEventListener",2,(function(){}),t.listenerId),void e._readTCFv1Data();"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||!n||(Ki(e,oo).GDPR.applies=!1===t.gdprApplies?0:1,Ki(e,oo).GDPR.euconsent=t.tcString||"",e._regulationResolved(eo))}))}},{key:"_readRegulatoryData",value:function(){var e=this;Qi(this,io,setTimeout((function(){Object.keys(Ki(e,ao)).length>0?e.trigger(new qi(qi.READ_TIMEOUT,{})):e._dispatchRegulationsResolvedEvent(),Qi(e,io,null)}),500)),"function"==typeof Ki(this,so).__uspapi&&(Ki(this,ao)[to]="_readCCPAData"),"function"!=typeof Ki(this,so).__tcfapi&&"function"!=typeof Ki(this,so).__cmp||(Ki(this,ao)[eo]="function"==typeof Ki(this,so).__tcfapi?"_readTCFv2Data":"_readTCFv1Data"),Object.keys(Ki(this,ao)).forEach((function(t){var n=Ki(e,ao)[t];e[n]()}))}},{key:"data",get:function(){return Ki(this,oo)}},{key:"resolved",get:function(){return null===Ki(this,io)}}])&&Xi(t.prototype,n),i&&Xi(t,i),e}(),io=new WeakMap,oo=new WeakMap,ro=new WeakMap,ao=new WeakMap,so=new WeakMap;Object.assign(no.prototype,A);function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uo=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ho(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function po(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}co(uo,"PAGE_LOAD","jac.inspect.page.pageLoad"),co(uo,"PING","jac.inspect.handshake.ping"),co(uo,"PONG","jac.inspect.handshake.pong"),co(uo,"POSITION_ADD","jac.inspect.position.add"),co(uo,"FETCH_BEGIN","jac.inspect.position.fetchBegin"),co(uo,"FETCH_COMPLETE","jac.inspect.position.fetchComplete"),co(uo,"POSITION_ROTATE","jac.inspect.position.rotate"),co(uo,"POSITION_REMOVE","jac.inspect.position.remove"),co(uo,"POSITION_IN_VIEW","jac.inspect.position.inView"),co(uo,"POSITION_OUT_VIEW","jac.inspect.position.outView"),co(uo,"POSITION_RENDER_START","jac.inspect.position.renderStart"),co(uo,"POSITION_RENDER_COMPLETE","jac.inspect.position.renderComplete"),co(uo,"POSITION_COLLAPSED","jac.inspect.position.collapsed"),co(uo,"AD_LOAD_COMPLETE","jac.inspect.position.ad.loadComplete"),co(uo,"AD_SIZE_CHANGED","jac.inspect.position.ad.sizeChanged"),co(uo,"POSITION_CONFIG_CHANGED","jac.inspect.position.configChanged"),co(uo,"POSITION_AD_MARKUP_REQUESTED","jac.inspect.position.ad.markupRequested"),co(uo,"POSITION_AD_MARKUP","jac.inspect.position.ad.markup");var vo=/\d\.\d\.\d(-rc\.\d{1,})?\/jac\.js$/,mo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(lo(this,e),yo.set(this,{writable:!0,value:void 0}),go.set(this,{writable:!0,value:void 0}),wo.set(this,{writable:!0,value:!0}),Eo.set(this,{writable:!0,value:void 0}),!t.performance)return console.warn("No performance support available"),void po(this,wo,!1);po(this,Eo,t);var n=t.performance;po(this,yo,parseFloat(n.timing.navigationStart.toFixed(2))),po(this,go,parseFloat(n.timing.responseEnd.toFixed(2)));var i=n.getEntriesByType("navigation");i&&i[0]&&po(this,go,parseFloat((i[0].responseEnd+ho(this,yo)).toFixed(2)))}var t,n,i;return t=e,(n=[{key:"getClientResourceTiming",value:function(){if(ho(this,wo)){var e=ho(this,Eo).performance.getEntriesByType("resource").filter((function(e){return e.name.match(vo)}));return e.length>0?e[0]:void 0}}},{key:"getFetchResourceTiming",value:function(e){if(ho(this,wo)){var t=ho(this,Eo).performance.getEntriesByType("resource").filter((function(t){return"script"===t.initiatorType&&t.name===e}));return t.length>0?t[t.length-1]:void 0}}},{key:"responseEnd",get:function(){return ho(this,go)}},{key:"timeOrigin",get:function(){return ho(this,yo)}}])&&fo(t.prototype,n),i&&fo(t,i),e}(),yo=new WeakMap,go=new WeakMap,wo=new WeakMap,Eo=new WeakMap;function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createPongEvent",value:function(e,t,n){var i=(n=n||new mo).getClientResourceTiming(),o={topic:uo.PONG,meta:{timestamp:(new Date).getTime(),responseEnd:n.responseEnd,history:t,client:{version:e.version},adServer:{meta:{},params:{}},site:{spaceId:e.config.service.site.spaceId}}};return i&&(o.meta.client.loadTime=i.responseEnd,o.meta.client.loadComplete=i.responseEnd+n.timeOrigin,o.meta.client.url=i.name),Object.keys(e.config.service.adServer).filter((function(e,t){return 0===t})).forEach((function(t){var n=e.config.service.adServer[t];o.meta.adServer.name=t,o.meta.adServer.timeout=n.timeout,o.meta.adServer.params=n.params,t===Ue["1AS"]&&(o.meta.adServer.meta.region=n.region)})),o}},{key:"createPositionAddEvent",value:function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=e._positions[t];if("string"==typeof r.config.client.targetElement){n=r.config.client.targetElement;var a=o.getElementById(n);i=a?a.getBoundingClientRect().top:null}var s={topic:uo.POSITION_ADD,meta:{timestamp:(new Date).getTime(),config:r.config,name:t,elementId:n,elementTop:i,sizes:r.config.service.sizes,containerType:r.containerType,params:r.config.service.params}};return s}},{key:"createFetchBeginEvent",value:function(e,t,n){return{topic:uo.FETCH_BEGIN,meta:{timestamp:(new Date).getTime(),name:e,url:t,prefetched:!!n}}}},{key:"createFetchCompleteEvent",value:function(e){var t=e.jac,n=e.positionName,i=e.url,o=e.jillTimings,r=e.positionResponse,a=e.requestTimings,s=t._positions[n],c={meta:r.meta},u=r.creativeId;return{topic:uo.FETCH_COMPLETE,meta:{timestamp:(new Date).getTime(),name:n,url:i,upstreamResponseDuration:o.upstreamDuration,serviceResponseDuration:o.totalRequestDuration,totalServiceResponseDuration:a?a.duration:null,processingDuration:o.processingDuration,alias:s?s.config.service.alias:void 0,creativeId:u,adData:c,status:r.status}}}},{key:"createPositionRotateEvent",value:function(e){return{topic:uo.POSITION_ROTATE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionRemoveEvent",value:function(e){return{topic:uo.POSITION_REMOVE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionInViewEvent",value:function(e){return{topic:uo.POSITION_IN_VIEW,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionOutOfViewEvent",value:function(e){return{topic:uo.POSITION_OUT_VIEW,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionRenderStartEvent",value:function(e,t){var n=e._positions[t];return{topic:uo.POSITION_RENDER_START,meta:{timestamp:(new Date).getTime(),name:t,timeout:n.config.client.render.timeout}}}},{key:"createPositionRenderCompleteEvent",value:function(e,t,n,i){var o=e._positions[t],r={topic:uo.POSITION_RENDER_COMPLETE,meta:{timestamp:(new Date).getTime(),name:t,containerType:o.containerType}};return void 0!==bo(n)&&void 0!==bo(i)&&(r.meta.size=n+"x"+i),r}},{key:"createAdSizeChangedEvent",value:function(e,t,n){var i={topic:uo.AD_SIZE_CHANGED,meta:{timestamp:(new Date).getTime(),name:e}};return void 0!==bo(t)&&void 0!==bo(n)&&(i.meta.size=t+"x"+n),i}},{key:"createAdLoadCompleteEvent",value:function(e){return{topic:uo.AD_LOAD_COMPLETE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPageLoadEvent",value:function(e){return{topic:uo.PAGE_LOAD,meta:{timestamp:e}}}},{key:"createPositionCollapsedEvent",value:function(e){return{topic:uo.POSITION_COLLAPSED,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionConfigChangedEvent",value:function(e,t){return{topic:uo.POSITION_CONFIG_CHANGED,meta:{timestamp:(new Date).getTime(),name:e,config:t}}}},{key:"createPositionAdMarkupEvent",value:function(e,t){return{topic:uo.POSITION_AD_MARKUP,meta:{timestamp:(new Date).getTime(),name:e,markup:t}}}}],(n=null)&&Oo(t.prototype,n),i&&Oo(t,i),e}();function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function So(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ro(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function Do(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var ko=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Co.set(this,{writable:!0,value:void 0}),Ao.set(this,{writable:!0,value:void 0}),Io.set(this,{writable:!0,value:[]}),No.set(this,{writable:!0,value:{}})}var t,n,i;return t=e,(n=[{key:"activate",value:function(e,t){var n=this;Ro(this,Ao,t),"1"===Ze.getParameter(e.location.href,"jac.inspect")&&this._launchInspector(),this.on(uo.PING,this._onPing,this),this.on(uo.POSITION_AD_MARKUP_REQUESTED,this._onMarkupRequested,this),this._initInternalListeners(t),e.addEventListener("message",(function(e){var t=e.data.topic;t!==uo.PING&&t!==uo.POSITION_AD_MARKUP_REQUESTED||n.trigger(new c(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){So(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source:e.source},e.data.meta)))}))}},{key:"produceEvent",value:function(e){Do(this,Co)?Do(this,Co).postMessage(e,"*"):Do(this,Io).push(e)}},{key:"_launchInspector",value:function(){var e=document.createElement("script");e.src="https://web.archive.org/web/20200805040542/https://jacky-prod-us-east-1.s3.amazonaws.com/jacky/bootstrap/jacky-bootstrap.min.js",document.head.appendChild(e)}},{key:"_initInternalListeners",value:function(e){e.on(Gi.POSITION_CREATED,this._onPositionCreated,this),e._jill.on(Tt.FETCH_START,this._onFetchStart,this),e._jill.on(Tt.RESPONSE_PROCESSED,this._onJillResponseProcessed,this),e.on(Gi.POSITION_ROTATE,this._onPositionRotate,this),e.on(Gi.POSITION_VIEW_START,this._onPositionViewStart,this),e.on(Gi.POSITION_VIEW_END,this._onPositionViewEnd,this),e.on(Gi.POSITION_RENDER_START,this._onPositionRenderStart,this),e.on(Gi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),e.on(Gi.POSITION_COLLAPSED,this._onPositionCollapsed,this),e.on(Gi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),e.on(Gi.AD_SIZE_CHANGED,this._onAdSizeChanged,this),e._pageObserver.on(v.LOADED,this._onPageLoad,this),e.on(Gi.POSITION_CONFIG_CHANGED,this._onPositionConfigChanged,this)}},{key:"_onPing",value:function(e){var t=Do(this,Ao).config;t&&t.service?Do(this,Co)?console.warn("Already responded to the ping request."):(Ro(this,Co,e.meta.source),this._sendPong()):console.warn("No config set yet. Can not reply to inspect ping requests.")}},{key:"_onMarkupRequested",value:function(e){e.meta&&e.meta.name?Do(this,Co)?Do(this,No)[e.meta.name]&&this.produceEvent(_o.createPositionAdMarkupEvent(e.meta.name,Do(this,No)[e.meta.name])):console.warn("No ping initialization request got."):console.warn("No position name provided in the ad markup request.")}},{key:"_sendPong",value:function(){var e=_o.createPongEvent(Do(this,Ao),Do(this,Io));this.produceEvent(e),Ro(this,Io,[])}},{key:"_onPositionCreated",value:function(e){this.produceEvent(_o.createPositionAddEvent(Do(this,Ao),e.meta.positionName))}},{key:"_onFetchStart",value:function(e){var t=this,n=e.meta.url,i=e.meta.prefetched;Object.keys(e.meta.request.positions).forEach((function(e){t.produceEvent(_o.createFetchBeginEvent(e,n,i))}))}},{key:"_onJillResponseProcessed",value:function(e){var t=this,n=e.meta.url,i=e.meta.response,o=i.adServerResponse,r=o.adServer.requestDuration,a=i.service.timings;a.upstreamDuration=r;var s=Do(this,Ao),c=(new mo).getFetchResourceTiming(n);Object.keys(o.positions).forEach((function(e){Do(t,No)[e]=o.positions[e].content.markup,t.produceEvent(_o.createFetchCompleteEvent({jac:s,positionName:e,url:n,jillTimings:a,positionResponse:o.positions[e],requestTimings:c}))}))}},{key:"_onPositionRotate",value:function(e){this.produceEvent(_o.createPositionRotateEvent(e.meta.positionName))}},{key:"_onPositionViewStart",value:function(e){this.produceEvent(_o.createPositionInViewEvent(e.meta.positionName))}},{key:"_onPositionViewEnd",value:function(e){this.produceEvent(_o.createPositionOutOfViewEvent(e.meta.positionName))}},{key:"_onPositionRenderStart",value:function(e){this.produceEvent(_o.createPositionRenderStartEvent(Do(this,Ao),e.meta.positionName))}},{key:"_onPositionRenderComplete",value:function(e){this.produceEvent(_o.createPositionRenderCompleteEvent(Do(this,Ao),e.meta.positionName,e.meta.width,e.meta.height))}},{key:"_onAdLoadComplete",value:function(e){this.produceEvent(_o.createAdLoadCompleteEvent(e.meta.positionName))}},{key:"_onAdSizeChanged",value:function(e){this.produceEvent(_o.createAdSizeChangedEvent(e.meta.positionName,e.meta.width,e.meta.height))}},{key:"_onPageLoad",value:function(e){this.produceEvent(_o.createPageLoadEvent(e.meta.timestamp))}},{key:"_onPositionCollapsed",value:function(e){this.produceEvent(_o.createPositionCollapsedEvent(e.meta.positionName))}},{key:"_onPositionConfigChanged",value:function(e){this.produceEvent(_o.createPositionConfigChangedEvent(e.meta.positionName,e.meta.config))}},{key:"history",get:function(){return Do(this,Io)}},{key:"adHistory",get:function(){return Do(this,No)}}])&&Po(t.prototype,n),i&&Po(t,i),e}(),Co=new WeakMap,Ao=new WeakMap,Io=new WeakMap,No=new WeakMap;Object.assign(ko.prototype,A);var Mo=ko;function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e,t){return!t||"object"!==jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=xo(e);if(t()){var o=xo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Fo(this,n)}}(n);function n(e,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).meta=i,o}return n}(c);function Wo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ho(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Vo(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}Go(Uo,"COUNTER","COUNTER"),Go(Uo,"DURATION","DURATION");var zo="JacLoadDelay",Jo="FetchDelay",Bo="PositionFetchDuration",Zo="PositionRenderDelay",Yo="PositionRenderDuration",qo="AdLoadDuration",Xo="PositionFetchErrorCount";function Ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(e,"_").concat(JSON.stringify(t)):e}var Qo=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$o.set(this,{writable:!0,value:void 0}),er.set(this,{writable:!0,value:void 0}),tr.set(this,{writable:!0,value:{}}),nr.set(this,{writable:!0,value:{}}),ir.set(this,{writable:!0,value:{}}),or.set(this,{writable:!0,value:void 0}),rr.set(this,{writable:!0,value:void 0}),Vo(this,$o,t),Vo(this,er,n||new mo)}var t,n,i;return t=e,(n=[{key:"start",value:function(){var e=Ho(this,$o);e._jill.on(Gi.FETCH_START,this._onFetchStart,this),e.on(Gi.FETCH_COMPLETE,this._onFetchComplete,this),e.on(Gi.POSITION_RENDER_START,this._onPositionRenderStart,this),e.on(Gi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),e.on(Gi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),e.on(Gi.FETCH_ERROR,this._onFetchError,this),Vo(this,or,Ho(this,er).responseEnd),this.markDurationStart(zo,null,Ho(this,or)),Vo(this,rr,(new Date).getTime()),this.markDurationEnd(zo,null,Ho(this,rr))}},{key:"stop",value:function(){Ho(this,$o)._jill.off(Gi.FETCH_START,this._onFetchStart,this),Ho(this,$o).off(Gi.FETCH_COMPLETE,this._onFetchComplete,this),Ho(this,$o).off(Gi.POSITION_RENDER_START,this._onPositionRenderStart,this),Ho(this,$o).off(Gi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),Ho(this,$o).off(Gi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),Ho(this,$o).off(Gi.FETCH_ERROR,this._onFetchError,this)}},{key:"flush",value:function(){Vo(this,nr,{}),Vo(this,ir,{})}},{key:"markDurationStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=n||(new Date).getTime();var i=Ko(e,t);Ho(this,tr)[i]&&console.warn("".concat(i," duration metric already started.")),Ho(this,tr)[i]={name:e,startTime:n,dimensions:t}}},{key:"markDurationEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=n||(new Date).getTime();var i=Ko(e,t);if(Ho(this,tr)[i]){var o=Ho(this,tr)[i];o.endTime=n,o.duration=parseFloat((o.endTime-o.startTime).toFixed(2)),Ho(this,nr)[i]=Ho(this,nr)[i]||[],Ho(this,nr)[i].push(o),delete Ho(this,tr)[i],this._notifyMetricEvent(new Uo(Uo.DURATION,o))}else console.error("".concat(i," duration metric not started."))}},{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Ko(e,t),i=Ho(this,ir)[n]=Ho(this,ir)[n]||{name:e,count:0,dimensions:t};i.count++,this._notifyMetricEvent(new Uo(Uo.COUNTER,i))}},{key:"_onFetchStart",value:function(e){var t=this,n=Object.keys(e.meta.request.positions);Ho(this,nr)[Jo]||(this.markDurationStart(Jo,null,Ho(this,rr)),this.markDurationEnd(Jo,null)),n.forEach((function(e){t.markDurationStart(Bo,{positionName:e})}))}},{key:"_onFetchComplete",value:function(e){var t=this;e.meta.positionNames.forEach((function(e){t.markDurationEnd(Bo,{positionName:e}),t.markDurationStart(Zo,{positionName:e})}))}},{key:"_onPositionRenderStart",value:function(e){var t=e.meta.positionName,n=Ko(Zo,{positionName:t});Ho(this,tr)[n]&&this.markDurationEnd(Zo,{positionName:t}),this.markDurationStart(Yo,{positionName:t})}},{key:"_onPositionRenderComplete",value:function(e){var t=e.meta.positionName;this.markDurationEnd(Yo,{positionName:t}),this.markDurationStart(qo,{positionName:t})}},{key:"_onAdLoadComplete",value:function(e){var t=e.meta.positionName;this.markDurationEnd(qo,{positionName:t})}},{key:"_onFetchError",value:function(e){var t=this;e.meta.positionNames.forEach((function(e){t.incrementCounter(Xo,{positionName:e})}))}},{key:"_notifyMetricEvent",value:function(e){var t=this;setTimeout((function(){t.trigger(e)}),0)}},{key:"durations",get:function(){var e=this;return Object.keys(Ho(this,nr)).reduce((function(t,n){return t.concat(Ho(e,nr)[n])}),[])}},{key:"counters",get:function(){var e=this;return Object.keys(Ho(this,ir)).map((function(t){return Ho(e,ir)[t]}))}}])&&Wo(t.prototype,n),i&&Wo(t,i),e}(),$o=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,ir=new WeakMap,or=new WeakMap,rr=new WeakMap;function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fr(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function hr(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}Object.assign(Qo.prototype,A);var pr="undefined"!=typeof $JAC_METRICS_QUEUE_DELAY$?$JAC_METRICS_QUEUE_DELAY$:5e3,dr=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;ur(this,e),vr.set(this,{writable:!0,value:void 0}),mr.set(this,{writable:!0,value:void 0}),yr.set(this,{writable:!0,value:void 0}),gr.set(this,{writable:!0,value:{}}),wr.set(this,{writable:!0,value:!1}),Er.set(this,{writable:!0,value:void 0}),br.set(this,{writable:!0,value:void 0}),hr(this,vr,t);var o=i.JAC_CONFIG||{},r=o.service&&o.service.host,a=o.service&&o.service.site&&o.service.site.name;this.setGlobalTags({siteName:a}),this.setMetricsHost(r||"https://web.archive.org/web/20200805040542/https://jill.fc.yahoo.com/"),hr(this,yr,n.version),hr(this,br,i)}var t,n,i;return t=e,(n=[{key:"activate",value:function(){var e=this;fr(this,Er)||(fr(this,vr).on(Uo.COUNTER,this._enqueueReport,this),fr(this,vr).on(Uo.DURATION,this._enqueueReport,this),hr(this,Er,(function(){return e.report()})),fr(this,br).addEventListener("unload",fr(this,Er)))}},{key:"deactivate",value:function(){fr(this,Er)&&(fr(this,vr).off(Uo.COUNTER,this._enqueueReport,this),fr(this,vr).off(Uo.DURATION,this._enqueueReport,this),fr(this,br).removeEventListener("unload",fr(this,Er)),hr(this,Er,null))}},{key:"setGlobalTags",value:function(e){var t=e.siteName;hr(this,gr,sr(sr({},fr(this,gr)),{},{siteName:t}))}},{key:"setMetricsHost",value:function(e){hr(this,mr,"".concat(e).concat("v1/client/m"))}},{key:"report",value:function(){var e=fr(this,vr).durations.map((function(e){return{type:"duration",value:e.duration,name:e.name,tags:e.dimensions||void 0}})),t=fr(this,vr).counters.map((function(e){return{type:"count",value:e.count,name:e.name,tags:e.dimensions||void 0}})),n=e.concat(t);if(!(n.length<=0)){var i=JSON.stringify({jacVersion:fr(this,yr),tags:fr(this,gr)||void 0,metrics:n});"function"==typeof fr(this,br).navigator.sendBeacon?fr(this,br).navigator.sendBeacon(fr(this,mr),i):(new(fr(this,br).Image)).src="".concat(fr(this,mr),"?data=").concat(encodeURIComponent(i)),fr(this,vr).flush()}}},{key:"_enqueueReport",value:function(){var e=this;fr(this,wr)||(hr(this,wr,!0),setTimeout((function(){e.report(),hr(e,wr,!1)}),pr))}},{key:"jacVersion",get:function(){return fr(this,yr)}},{key:"collector",get:function(){return fr(this,vr)}},{key:"globalTags",get:function(){return fr(this,gr)}},{key:"beaconUrl",get:function(){return fr(this,mr)}}])&&lr(t.prototype,n),i&&lr(t,i),e}(),vr=new WeakMap,mr=new WeakMap,yr=new WeakMap,gr=new WeakMap,wr=new WeakMap,Er=new WeakMap,br=new WeakMap;function Or(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}Object.assign(dr.prototype,A);var Sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_r(this,"collector",void 0),_r(this,"reporter",void 0),Pr.set(this,{writable:!0,value:void 0})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){this.collector=new Qo(e),this.reporter=new dr(this.collector,e),this.collector.start()}},{key:"processJillMetricFlag",value:function(e){void 0===Tr(this,Pr)&&(function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Pr,!1!==e),this.reporter&&Tr(this,Pr)&&this.reporter.activate(),this.collector&&!Tr(this,Pr)&&this.collector.stop())}},{key:"configUpdated",value:function(e){var t=e.service.site&&e.service.site.name;this.reporter.setGlobalTags({siteName:t}),e.service.host&&this.reporter.setMetricsHost(e.service.host)}}])&&Or(t.prototype,n),i&&Or(t,i),e}(),Pr=new WeakMap;function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ar=window.JAC_BASE_URL||"https://web.archive.org/web/20200805040542/https://jac.yahoosandbox.com",Ir=Cr("0.1.1")!==_?"0.1.1":"0.0.0",Nr={},Mr=new At(Ir),jr=new J,Lr=new Ai(jr,window),Fr=$i=$i||new no,xr=new Mo,Gr=new Sr;function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar;return"".concat(e,"/").concat(Yr.version)}function Wr(e){return Cr(e)===O?document.getElementById(e):(console.error("Support for targetElement as HTML element is not supported yet, use ID instead."),null)}function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Cr(e)!==O)return console.warn("Non-string positionName found that is ignored: ".concat(e,".")),!1;if(!t||!t.client||!t.service&&!Yr.config.service.positions[e])return console.warn("Invalid position config for position ".concat(e,".")),!1;if(i&&!Nr[e])return console.warn("No ad data for position ".concat(e,".")),!1;var o=t.client.targetElement;return o?!(n&&!Wr(o))||(console.warn("Target HTML element not found for position ".concat(e,".")),!1):(console.warn("No target HTML element configured for position ".concat(e,".")),!1)}function Vr(e){return e?!!e.isServiceConfigValid()||(console.warn("JAC Config has missing/invalid information."),!1):(console.warn("JAC Config has not been set."),!1)}function zr(e,t){var n=e.filter((function(e){return Cr(e)===O&&t[e]})),i=e.filter((function(e){return-1===n.indexOf(e)}));return 0===n.length&&console.warn("Fetch aborted because there are no valid positions."),i.length>0&&console.warn("The following positions were ignored",i),n}function Jr(e){Fr.resolved?e():(Fr.on(qi.RESOLVED,e),Fr.on(qi.READ_TIMEOUT,e),Fr.on(qi.API_NOT_FOUND,e))}function Br(e,t){Jr((function(){Yr.trigger(new Gi(Gi.FETCH_START,{positionNames:e})),Mr.fetchAds(e,t)}))}function Zr(e){Yr.trigger(new Gi(Gi.POSITION_CONFIG_CHANGED,{positionName:e.target.name,config:e.meta}))}var Yr={_jill:Mr,_scheduler:Lr,_adData:Nr,_positions:{},_positionComponents:{},_pageObserver:jr,_userRegulations:Fr,_inspectHandler:xr,_renderingPositionNames:[],_remainingRenderingPositionsMap:{},get version(){return Ir},setConfig:function(e){var t=this,n=e;this.config=new mt(e);var i=n.service&&n.service.user?n.service.user.regs:void 0;Fr.resolve(window,i),Fr.resolved?this.config.setRegulatoryData(Fr):Fr.on(qi.RESOLVED,(function(){t.config.setRegulatoryData(Fr)})),Fr.on(qi.UPDATED,(function(){t.config.setRegulatoryData(Fr)}));var o=this.config.service.positions,r=this.config.client.positions,a=[],s=[];r&&(e=mt.applyDefaultPosition(e),Object.keys(r).forEach((function(n){var i={service:e.service&&e.service.positions?e.service.positions[n]:{},client:e.client.positions[n]},c=o&&o[n],u=t._createPosition(n,{service:c||{},client:r[n]},i);Nr[n]?u.config.client.render.auto&&t._pageObserver.domLoaded&&s.push(n):u&&u.config.client.fetch.auto&&a.push(n)})),a.length>0&&this.fetch(a),s.length>0&&this.render(s)),Gr.configUpdated(this.config),function(e){if(e.client&&P.isFunction(e.client.onReady)){var t=e.client.onReady;setTimeout((function(){try{t()}catch(e){console.error("Error while calling JAC_CONFIG.onReady():",e)}}),0)}}(n)},getConfig:function(){return this.config?this.config.clone():void 0},processQueue:function(){Mr.process()},createPosition:function(e,t){var n=this._createPosition(e,t),i=n?n.config.client:void 0;Nr[e]?i.render.auto&&this._pageObserver.pageLoaded&&this.render([e]):i&&i.fetch.auto&&this.fetch([e])},_createPosition:function(e,t,n){if(this.config){if(Hr(e,t)){this._positions[e]?this._positions[e].update(t):(this._positions[e]=new zt(e,t),this._positions[e].inputConfig=n||t,this._positions[e].on(xt.CONFIG_UPDATE,Zr),this.trigger(new Gi(Gi.POSITION_CREATED,{positionName:e})),Lr.schedule(this._positions[e]));var i=this._positions[e].config;if(t.service&&(this.config.service.positions[e]=Object.assign({},i.service)),t.client&&(this.config.client.positions[e]=Object.assign({},i.client)),i.client.content&&i.client.content.markup){var o=i.client.content;Nr[e]={status:He,content:{markup:o.markup,size:Dr(Dr({},o.size),{},{unit:We})},config:i,clientBaseUrl:Ur()}}return this._positions[e]}}else console.warn("JAC Config has not been set.")},_createPositionComponent:function(e){var t=this,n=e.name,i=Wr(e.config.client.targetElement),o=document.createElement("div");o.id="jacPosition_".concat(n),i.appendChild(o);var r=new yi(e,o,this._pageObserver),a={positionName:n};return r.on(en.RENDER_START,(function(){t.trigger(new Gi(Gi.POSITION_RENDER_START,a))})),r.on(en.RENDER_COMPLETE,(function(n){var i=Object.assign(a,n.meta);t.trigger(new Gi(Gi.POSITION_RENDER_COMPLETE,i)),function(e){Yr._remainingRenderingPositionsMap[e]?(delete Yr._remainingRenderingPositionsMap[e],Object.keys(Yr._remainingRenderingPositionsMap).length<=0&&Yr.trigger(new Gi(Gi.RENDER_COMPLETE,{positionNames:Yr._renderingPositionNames}))):console.warn("Unexpected position rendering completed: ".concat(e,"."))}(e.name)})),r.on(en.VIEW_START,(function(){t.trigger(new Gi(Gi.POSITION_VIEW_START,a))})),r.on(en.VIEW_END,(function(){t.trigger(new Gi(Gi.POSITION_VIEW_END,a))})),r.on(en.AD_LOAD,(function(){t.trigger(new Gi(Gi.AD_LOAD_COMPLETE,a))})),r.on(en.NO_AD,(function(){t.trigger(new Gi(Gi.POSITION_COLLAPSED,a))})),r.on(en.AD_SIZE_CHANGED,(function(e){var n=Object.assign(a,e.meta);t.trigger(new Gi(Gi.AD_SIZE_CHANGED,n))})),r.on(en.DESTROY,(function(){Lr.unsubscribe(r),delete t._positionComponents[n]})),r.on(en.AD_MESSAGE,(function(e){t.trigger(new Gi(Gi.AD_MESSAGE,{positionName:n,message:e.meta}))})),Lr.subscribe(r),r},destroyPosition:function(e){var t=this._positionComponents[e];t&&t.destroy();var n=this._positions[e];n&&(this._positions[e].off(xt.CONFIG_UPDATE,Zr),Lr.remove(n),delete this._positions[e])},fetch:function(e){var t=this;if(Vr(this.config))if(P.isSet(e)||(e=Object.keys(this._positions)),Array.isArray(e)&&0!==e.length){var n=zr(e,this._positions);if(n.length>0)n.filter((function(e){return Lr.isManagedPosition(e)})).forEach((function(e){t._positions[e].update({service:Yr.config.service.positions[e],client:Yr.config.client.positions[e]}),Lr.restart(t._positions[e],t._positionComponents[e])})),Br(n,this.config.service)}else console.warn("First argument for JAC.fetch() should be an array of position names")},fetchGroup:function(e){if(Vr(this.config))if(Cr(e)===O&&this.config.service.groups[e]){var t=zr(this.config.service.groups[e].positions,this.config,this._positions);t.length>0&&function(e,t,n){Jr((function(){Yr.trigger(new Gi(Gi.FETCH_START,{positionNames:t})),Mr.fetchGroupPositions(e,t,n)}))}(e,t,this.config.service)}else console.warn("groupName can not be found")},render:function(e){var t=this;if(P.isSet(e)||(e=Object.keys(Nr)),Array.isArray(e)&&0!==e.length){var n=[];this.trigger(new Gi(Gi.RENDER_START,{positionNames:e})),this._renderingPositionNames=e,this._remainingRenderingPositionsMap={},e.forEach((function(e){t._remainingRenderingPositionsMap[e]=!0;var i=t._positions[e];Hr(e,i?i.config:null,!0,!0)&&i?(t._positionComponents[e]||(t._positionComponents[e]=t._createPositionComponent(i)),t._positionComponents[e].render(Nr[e]),delete Nr[e]):n.push(e)})),n.length>0&&console.warn("The following positions were ignored "+n)}else console.warn("First argument for JAC.render() should be an array of position names.")},updateMeta:function(e,t,n,i){var o=this;if(Array.isArray(e)&&0!==e.length)if(!t||P.isString(t)&&!n)console.warn("Invalid meta was provided.");else{var r=[];e.forEach((function(e){o._positionComponents[e]?o.config.updateMeta(e,t,n,i)&&o._positionComponents[e].updateMeta():r.push(e)})),r.length>0&&console.warn("The following positions were ignored from the message execution "+r)}else console.warn("First argument for JAC.updateMeta() should be an array of position names.")}};function qr(e){var t=e.filter((function(e){var t=Yr._positions[e];return t&&t.config&&t.config.client.render.auto}));t.length>0&&Yr.render(t)}Object.assign(Yr,A);var Xr=Yr;Object.assign(Xr,{PageObserver:J,PageEvent:v}),window!==window.top&&"undefined"==typeof JAC_CONFIG?function(e){var t=function(e){var t,n,i,o=e.name;if(!o)throw Error("No data provided for the position sandbox.");e.name="";try{e.frameElement.removeAttribute("name")}catch(e){}try{var r=JSON.parse(o);t=r.token,n=r.adData,i=r.safeFrame}catch(e){throw Error("Invalid data provided for the position sandbox.")}if(!t)throw Error("Missing sandbox token.");if(!n||!n.content)throw Error("Missing sandbox ad data.");if(!n.content.markup)throw Error("Missing sandbox ad markup.");if(!n.content.size||!n.content.size.width||!n.content.size.height)throw Error("Missing sandbox ad size.");if(!n.config||!n.config.service||!n.config.client)throw Error("Missing sandbox position config.");var a=n.config.service.sizes,s=a?a.map((function(e){var t=Fe(e.split("x"),2),n=t[0],i=t[1];return{width:parseInt(n),height:parseInt(i)}})):[],c=!ve.isMobileMomentAd(n)&&(!n.meta||!n.meta.aolSize)&&s.length>1;return{token:t,adMarkup:n.content.markup,size:n.content.size,detectSize:c,allowedSizes:s,positionConfig:n.config,safeFrameData:i}}(e),n=t.token,i=t.adMarkup,o=t.size,r=t.detectSize,a=t.allowedSizes,s=t.positionConfig,c=t.safeFrameData;!function(e,t){je=new pe(t.top,e)}(n,e),function(e,t){e.JAC={sandbox:new we(je,t)}}(e,s);var u=s.client.features.safeFrame;u&&u.enabled&&function(e,t,n){je.listen(),e.$sf={ext:new Ae(je,t,n)},e.Y={SandBox:{vendor:new Le(je)}}}(e,s,c),function(e){if("complete"===document.readyState)return e();if(void 0!==window.addEventListener)window.addEventListener("load",e,!1);else if(void 0!==document.addEventListener)document.addEventListener("load",e,!1);else if(void 0!==window.attachEvent)window.attachEvent("onload",e);else if("function"==typeof window.onload){var t=window.onload;window.onload=function(){t(),e()}}else window.onload=e}((function(){return xe({detectSize:r,initialWidth:o.width,initialHeight:o.height,allowedSizes:a})})),function(e,t){e.document.write("<div>".concat(t,"</div>"))}(e,i),je.send(new q({topic:q.topic.WRITE_COMPLETE}))}(window):(!function(e){Mr.on(Tt.RESPONSE_PROCESSED,(function(e){var t=e.meta.response;Gr.processJillMetricFlag(t.client.metrics);var n=t.adServerResponse.positions,i=Object.keys(n);i.forEach((function(e){var i=n[e],o=Yr._positions[e];if(o){if(i.config=o.config,i.clientBaseUrl=Ur(t.client.url),i.meta=i.meta||{},i.meta.isMobileMoment=ve.isMobileMomentAd(i),Yr._adData[e]=i,!o.rotated&&o.config.client.features.rotation.enabled){var r=new ft(o,i).createNewPositionRotationConfig(Yr.config.service.adServer);o.updateRotationConfig(r)&&Lr.update(o)}}else console.warn("Response for a non-existing position ".concat(e," processed."))})),Yr.trigger(new Gi(Gi.FETCH_COMPLETE,{positionNames:i,response:{positions:n}})),jr.domLoaded&&qr(i)})),Mr.on(Tt.FETCH_TIMEOUT,(function(e){Yr.trigger(new Gi(Gi.FETCH_TIMEOUT,e.meta))})),Mr.on(Tt.FETCH_ERROR,(function(e){Yr.trigger(new Gi(Gi.FETCH_ERROR,e.meta))})),Lr.on(_i.ROTATION,(function(e){var t=Yr.config.service,n=e.meta.positionName,i=Yr._positions[e.meta.positionName],o=e.meta.size;if(!i.rotated){i.rotated=!0;var r=new ft(i,Yr._positionComponents[n].adData);i.alias=r.getRotationAdSizeAlias(e.meta.size)}t=Yr.config.createNextRotationConfig(i,o),Yr.trigger(new Gi(Gi.POSITION_ROTATE,{positionName:n})),Br([n],t)})),xr.activate(e,Yr),Gr.init(Yr),function(e){e.JAC_CONFIG&&Yr.setConfig(e.JAC_CONFIG)}(e),Yr.processQueue(),ft.init(e),jr.on(v.DOM_LOADED,(function(){qr(Object.keys(Yr._adData)),!Yr.config||Yr.config.client.trackers.opus?Jr((function(){return function(e){var t=Fr.data.GDPR,n=Fr.data.CCPA,i=Ze.removeParameters(e.document.referrer),o="".concat("https://web.archive.org/web/20200805040542/https://opus.analytics.yahoo.com/tag/opus-frame.html?id=3")+"&gdpr=".concat(null===t.applies?"":t.applies)+"&gdpr_consent=".concat(t.euconsent)+"&us_privacy=".concat(n.usPrivacy)+"&referrer=".concat(encodeURIComponent(i));a.injectTrackingPixel(o,e)}(e)})):Yr.config&&Yr.config.client.trackers.smartPixel&&function(e){var t=Ze.removeParameters(e.document.referrer),n="".concat("https://web.archive.org/web/20200805040542/https://tag.idsync.analytics.yahoo.com/sp-frame.html")+"?referrer=".concat(encodeURIComponent(t));a.injectTrackingPixel(n,e)}(e)}))}(window),window.JAC=Xr)}]);
//# sourceMappingURL=jac.js.map

}
/*
     FILE ARCHIVED ON 04:05:42 Aug 05, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:14:59 Jan 12, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  PetaboxLoader3.datanode: 121.829 (5)
  exclusion.robots.policy: 134.181
  PetaboxLoader3.resolve: 123.09 (2)
  captures_list: 274.639
  xauthn.identify: 64.788
  RedisCDXSource: 2.514
  load_resource: 208.592 (2)
  exclusion.robots: 134.198
  LoadShardBlock: 82.929 (3)
  CDXLines.iter: 16.929 (3)
  esindex: 0.008
  xauthn.chkprivs: 69.062
*/